<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SOP SEO: De Idea a IndexaciÃ³n</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;9..40,600;9..40,700;9..40,800&family=Space+Mono:wght@400;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
/* â•â•â•â• CORE STYLES â•â•â•â• */
*{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{background:#080c14;color:#e2e8f0;font-family:'DM Sans','Segoe UI',system-ui,sans-serif;min-height:100vh;overflow-x:hidden}
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:rgba(255,255,255,.03)}
::-webkit-scrollbar-thumb{background:rgba(255,255,255,.1);border-radius:3px}

/* â•â•â•â• ANIMATIONS â•â•â•â• */
@keyframes fadeIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
@keyframes popIn{from{transform:scale(.7);opacity:0}to{transform:scale(1);opacity:1}}
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(245,158,11,.35)}50%{box-shadow:0 0 0 10px rgba(245,158,11,0)}}
@keyframes glow{0%,100%{text-shadow:0 0 20px rgba(245,158,11,.3)}50%{text-shadow:0 0 40px rgba(245,158,11,.6)}}

/* â•â•â•â• UTILS â•â•â•â• */
.mono{font-family:'Space Mono',monospace}
.code{font-family:'JetBrains Mono','Fira Code',monospace}
.hidden{display:none!important}

/* â•â•â•â• COMPONENTS â•â•â•â• */
.badge-overlay{position:fixed;inset:0;z-index:9999;background:rgba(0,0,0,.75);backdrop-filter:blur(10px);display:flex;align-items:center;justify-content:center;animation:fadeIn .3s}
.badge-card{background:linear-gradient(145deg,#1e293b,#0f172a);border:2px solid #f59e0b;border-radius:28px;padding:52px 48px;text-align:center;box-shadow:0 0 100px rgba(245,158,11,.2);animation:popIn .4s cubic-bezier(.175,.885,.32,1.275);max-width:400px;width:90%}

.prompt-block{background:rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.07);border-radius:14px;margin-bottom:20px;overflow:hidden}
.prompt-toggle{width:100%;background:none;border:none;color:#e2e8f0;padding:18px 22px;display:flex;align-items:center;justify-content:space-between;cursor:pointer;font-family:inherit;font-size:15px;font-weight:700;text-align:left}
.prompt-toggle:hover{background:rgba(255,255,255,.02)}
.prompt-arrow{transition:transform .3s;font-size:11px;opacity:.4}
.prompt-arrow.open{transform:rotate(180deg)}
.prompt-body{padding:0 22px 22px}
.prompt-pre{background:rgba(0,0,0,.5);border:1px solid rgba(255,255,255,.05);border-radius:10px;padding:18px;color:#cbd5e1;font-size:12.5px;line-height:1.7;overflow-x:auto;white-space:pre-wrap;word-break:break-word;max-height:520px;overflow-y:auto;font-family:'JetBrains Mono','Fira Code',monospace}

.copy-btn{background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.12);color:#94a3b8;padding:6px 16px;border-radius:8px;font-size:12px;cursor:pointer;transition:all .25s;font-family:inherit;font-weight:600}
.copy-btn.copied{background:#22c55e;color:#fff;border-color:#22c55e}

.info-box{border-radius:12px;padding:18px;margin-top:16px}
.section-title{color:#e2e8f0;font-size:16px;font-weight:700;margin-top:32px;margin-bottom:14px;font-family:'Space Mono',monospace;border-bottom:1px solid rgba(255,255,255,.06);padding-bottom:10px}
.step-list{color:#cbd5e1;font-size:14px;line-height:2.2;padding-left:22px;margin:0}

.check-item{display:flex;align-items:flex-start;gap:10px;padding:7px 0;cursor:pointer;font-size:14px;line-height:1.5;transition:color .2s}
.check-box{width:22px;height:22px;min-width:22px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:12px;transition:all .2s;margin-top:1px}

.phase-card{border-radius:16px;padding:20px 24px;cursor:pointer;transition:all .2s}
.phase-card:hover{transform:translateX(4px)}
.complete-btn{width:100%;padding:18px 24px;border:none;border-radius:14px;font-size:16px;font-weight:800;cursor:pointer;font-family:'Space Mono',monospace;letter-spacing:1px;transition:transform .15s;margin-top:12px}
.complete-btn:active{transform:scale(.97)}

.nav-bar{background:rgba(0,0,0,.5);border-bottom:1px solid rgba(255,255,255,.06);padding:12px 20px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100;backdrop-filter:blur(16px)}
.back-btn{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);color:#94a3b8;padding:8px 18px;border-radius:8px;cursor:pointer;font-size:13px;font-family:inherit;font-weight:600;transition:all .2s}
.back-btn:hover{background:rgba(255,255,255,.1);color:#e2e8f0}

.hero{background:linear-gradient(170deg,#0c1220,#0a0f1a 40%,#111827);border-bottom:1px solid rgba(255,255,255,.04);padding:56px 20px 52px;text-align:center;position:relative;overflow:hidden}
.hero-grid{position:absolute;inset:0;opacity:.04;background-image:linear-gradient(rgba(255,255,255,.1) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,.1) 1px,transparent 1px);background-size:48px 48px}
.hero-inner{position:relative;max-width:700px;margin:0 auto}
.hero-tag{display:inline-block;background:rgba(245,158,11,.1);border:1px solid rgba(245,158,11,.25);border-radius:8px;padding:6px 16px;font-size:12px;font-weight:700;color:#f59e0b;letter-spacing:2px;margin-bottom:20px}
.hero-title{font-size:clamp(28px,5vw,44px);font-weight:800;line-height:1.15;margin-bottom:16px;background:linear-gradient(135deg,#f1f5f9,#94a3b8);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
</style>
</head>
<body>

<div id="badge-popup" class="badge-overlay hidden" onclick="closeBadge()">
  <div class="badge-card" onclick="event.stopPropagation()">
    <div id="bp-icon" style="font-size:72px;margin-bottom:20px"></div>
    <div class="mono" style="color:#f59e0b;font-size:12px;font-weight:700;letter-spacing:5px;margin-bottom:8px">BADGE DESBLOQUEADO</div>
    <div id="bp-name" class="mono" style="color:#f1f5f9;font-size:30px;font-weight:800;margin-bottom:28px"></div>
    <button onclick="closeBadge()" style="background:linear-gradient(135deg,#f59e0b,#d97706);border:none;color:#000;font-weight:800;padding:14px 36px;border-radius:14px;cursor:pointer;font-size:15px;font-family:inherit">Â¡SIGUIENTE FASE!</button>
  </div>
</div>

<div id="app"></div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DATA (UPDATED TO 8 PHASES) â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
var PHASES=[
  {id:1,icon:"ğŸ’¡",title:"Generar 100 Ideas de Nichos",subtitle:"Opciones infinitas. Elige la que TE APASIONE.",time:"8-10 min",xp:100,output:"Lista de 100 nichos",badge:"IDEATOR",bi:"ğŸ§ "},
  {id:2,icon:"ğŸ”",title:"AnÃ¡lisis Competencia & Arquitectura",subtitle:"EspÃ­a a la competencia. Luego, supÃ©ralos.",time:"15-20 min",xp:200,output:"Lista de URLs analizada",badge:"STRATEGIST",bi:"ğŸ¯"},
  {id:3,icon:"ğŸ“",title:"Arquitectura de Prompts & DiseÃ±o",subtitle:"Define el Header, Footer y Estilo Global.",time:"15-20 min",xp:300,output:"Prompts para cada URL",badge:"ARCHITECT",bi:"ğŸ›ï¸"},
  {id:4,icon:"âš–ï¸",title:"Legales & Compliance Iterativo",subtitle:"Genera Privacidad, Cookies y TÃ©rminos uno a uno.",time:"10-15 min",xp:250,output:"Archivos .html legales",badge:"LAWYER",bi:"ğŸ›¡ï¸"},
  {id:5,icon:"ğŸ¤–",title:"SEO TÃ©cnico (Robots + Sitemap)",subtitle:"Haz que Google entienda tu web.",time:"5 min",xp:200,output:"robots.txt + sitemap.xml",badge:"TECH SEO",bi:"âš™ï¸"},
  {id:6,icon:"â˜ï¸",title:"Despliegue (GitHub + Vercel)",subtitle:"Tu cÃ³digo local sube a la nube gratis.",time:"10-15 min",xp:350,output:"Web online en HTTPS",badge:"DEVOPS",bi:"â˜ï¸"},
  {id:7,icon:"âœ…",title:"QA & AuditorÃ­a Post-Launch",subtitle:"RevisiÃ³n final en entorno de producciÃ³n.",time:"10-15 min",xp:200,output:"Web sin errores",badge:"TESTER",bi:"ğŸ§ª"},
  {id:8,icon:"ğŸ”",title:"IndexaciÃ³n (Search Console)",subtitle:"Avisa a Google: 'Â¡Ya estoy aquÃ­!'",time:"5-8 min",xp:400,output:"Solicitud de indexaciÃ³n",badge:"PUBLISHER",bi:"ğŸš€"}
];
var TXP=PHASES.reduce(function(s,p){return s+p.xp},0);

var completed=[];try{completed=JSON.parse(localStorage.getItem('sop_done_v2')||'[]')}catch(e){}
var qaChecks={};try{qaChecks=JSON.parse(localStorage.getItem('sop_qa_v2')||'{}')}catch(e){}

function save(){try{localStorage.setItem('sop_done_v2',JSON.stringify(completed));localStorage.setItem('sop_qa_v2',JSON.stringify(qaChecks))}catch(e){}}
function getXP(){var s=0;for(var i=0;i<completed.length;i++){var p=PHASES.find(function(x){return x.id===completed[i]});if(p)s+=p.xp}return s}
function getLevel(){var n=completed.length;return n===0?"NOVATO":n<=2?"APRENDIZ":n<=4?"JUNIOR":n<=6?"SENIOR":n===8?"MAESTRO SEO":"PRO"}
function getPct(){return Math.round((getXP()/TXP)*100)}

function showBadge(p){document.getElementById('bp-icon').textContent=p.bi;document.getElementById('bp-name').textContent=p.badge;document.getElementById('badge-popup').classList.remove('hidden')}
function closeBadge(){document.getElementById('badge-popup').classList.add('hidden')}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PROMPTS (UPDATED) â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
var P={};
P.P1="=== GENERADOR DE 100 IDEAS DE NICHOS SEO RENTABLES ===\n\nCONTEXTO:\nSoy emprendedor digital que quiere crear sitios de calculadoras online para ganar dinero.\nObjetivo: Obtener 100 ideas de nichos REALES y VIABLES en [PAÃS-DESTINO].\n\nCRITERIOS DE FILTRO (ESTRICTOS):\n1. Volumen de bÃºsquedas: 600-10000/mes (debe tener demanda real)\n2. Competencia: BAJA-MEDIA (no dominado por Google o sitios gigantes)\n3. Potencial monetario: EUR 500-3000+/mes realista\n4. ValidaciÃ³n: Que EXISTA demanda real en [PAÃS-DESTINO]\n\nFORMATO DE RESPUESTA (OBLIGATORIO):\nDevuelve EXACTAMENTE 100 ideas en este formato CSV:\n\nRanking | Nicho | Palabra Clave Principal | Volumen/Mes Est. | Viabilidad | Por QuÃ© Funciona | Potencial Mensual EUR | CategorÃ­a\n\nEjemplo de filas:\n1 | Calculadora de Hipotecas | \"hypothekenrechner\" | 1800 | ALTA | Alemanes buscan financiamiento. Alto ticket. | 1500-2500 | Finanzas\n\nREGLAS IMPORTANTES:\n- NO repitas nichos (cada uno Ãºnico)\n- Los volÃºmenes deben ser REALISTAS\n- Incluye nichos obvios Y nichos ocultos\n\nAHORA GENERA LOS 100 NICHOS.";

P.P2="=== ANÃLISIS COMPETIDOR & ARQUITECTURA DE URLs ===\n\nCONTEXTO:\nElegÃ­ el nicho: [NICHO-ELEGIDO]\nPalabra clave principal: [PALABRA-CLAVE-PRINCIPAL]\nPaÃ­s/Idioma: [PAÃS-IDIOMA]\n\nPARTE 1: ANÃLISIS DE COMPETENCIA\nNecesito que analices a los competidores TOP 10. Â¿QuÃ© URLs tienen? Â¿QuÃ© keywords atacan?\n\nPARTE 2: ANÃLISIS DE GAPS\n- Â¿QuÃ© URLs crean los competidores?\n- Â¿QuÃ© Keywords NO atacan (oportunidades)?\n\nPARTE 3: ARQUITECTURA RECOMENDADA\n1. Â¿CuÃ¡ntas URLs MÃNIMO? JUSTIFICA.\n2. Para CADA URL: Nombre, URL amigable, KW objetivo, BÃºsquedas/mes, Tipo, JustificaciÃ³n.\n3. Estructura en orden de importancia.\n\nPARTE 4: VENTAJA COMPETITIVA\nÂ¿CÃ³mo SUPERAR a la competencia? 3-5 acciones especÃ­ficas.";

P.P3="=== ARQUITECTO DE PROMPTS WEB & SYSTEM DESIGN ===\n\n" +
  "INPUTS:\n" +
  "Nicho: [NICHO]\n" +
  "Branding/Estilo: [BRANDING] (Ej: Minimalista, azul corporativo, fuente sans-serif)\n" +
  "Arquitectura de URLs: [URLS-ARQUITECTURA] (Lista completa del paso anterior)\n\n" +
  "ROL:\n" +
  "Eres un Senior Frontend Architect y Prompt Engineer. Tu tarea NO es escribir el cÃ³digo HTML ahora, sino diseÃ±ar los \"Prompts de InstrucciÃ³n\" perfectos para que un Junior AI Developer codifique la web paso a paso en la siguiente fase.\n\n" +
  "REGLAS DE ORO (CONSISTENCIA GLOBAL):\n" +
  "1. SINGLE SOURCE OF TRUTH: Define primero un Header (con navegaciÃ³n basada en la Arquitectura) y un Footer estÃ¡ndar. Estos deben inyectarse en CADA prompt individual.\n" +
  "2. NAVEGACIÃ“N REAL: Los enlaces generados deben apuntar a las URLs definidas (ej: href=\"servicios.html\"), no a \"#\".\n\n" +
  "ALGORITMO DE EJECUCIÃ“N (ITERATIVO):\n" +
  "1. ANALIZA la arquitectura y define mentalmente el bloque Header/Footer global.\n" +
  "2. GENERA el Prompt de Desarrollo para la PRIMERA URL de la lista.\n" +
  "3. DETENTE y espera mi instrucciÃ³n.\n" +
  "4. Cuando yo escriba \"Siguiente\", genera el prompt para la segunda URL, manteniendo estrictamente la coherencia del Header/Footer.\n\n" +
  "FORMATO DE SALIDA (Para cada URL):\n" +
  "Genera un bloque de cÃ³digo listo para copiar que contenga:\n" +
  "\"ActÃºa como Experto Web. Genera el cÃ³digo HTML5 completo (con Tailwind CSS vÃ­a CDN) para la pÃ¡gina: [NOMBRE_URL].\n" +
  "- Title Tag SEO: [TÃ­tulo Optimizado]\n" +
  "- Estructura Visual: [Instrucciones de diseÃ±o]\n" +
  "- Header Global: [Instrucciones precisas del menÃº y logo]\n" +
  "- Footer Global: [Instrucciones precisas de enlaces legales y sitemap]\n" +
  "- Contenido Principal: [Secciones especÃ­ficas para esta URL: H1, Textos, CTAs, Features]\"\n\n" +
  "--- INSTRUCCIÃ“N FINAL ---\n" +
  "Comienza analizando las URLs y entrÃ©game SOLO el prompt para la URL #1 (Home). Al final pregunta: \"Â¿Validas este prompt para pasar a la siguiente?\"";

P.P4="=== GENERADOR DE ECOSISTEMA LEGAL & COMPLIANCE (MODO ITERATIVO) ===\n\n" +
  "INPUTS:\n" +
  "PaÃ­s de OperaciÃ³n: [PAÃS] (Define la jurisdicciÃ³n: RGPD, CCPA, LGPD, etc.)\n" +
  "Nombre del Proyecto: [NOMBRE_WEB]\n" +
  "Datos del Responsable: [DATOS_CONTACTO_COMPLETOS] (Nombre/Empresa, DirecciÃ³n, Email, NIF/Tax ID)\n" +
  "Estilo Visual: [BRANDING] (Mismo que fase anterior)\n\n" +
  "ROL:\n" +
  "Eres un Abogado Digital Experto en Compliance y un Senior Frontend Developer.\n" +
  "Tu objetivo es blindar legalmente el proyecto generando las pÃ¡ginas obligatorias una a una, asegurando coherencia tÃ©cnica con el resto del sitio.\n\n" +
  "PROTOCOLO DE EJECUCIÃ“N:\n" +
  "1. ANÃLISIS NORMATIVO: Basado en el [PAÃS], lista quÃ© pÃ¡ginas son estrictamente obligatorias (ej: EspaÃ±a -> Aviso Legal, Privacidad, Cookies, Condiciones).\n" +
  "2. DESARROLLO ITERATIVO:\n" +
  "   - No generes todo el cÃ³digo de golpe.\n" +
  "   - Genera el cÃ³digo HTML completo para la PRIMERA pÃ¡gina de la lista.\n" +
  "   - Detente y pregunta: \"Â¿Validas los datos y el diseÃ±o? Â¿Pasamos a la siguiente?\".\n\n" +
  "REQUISITOS TÃ‰CNICOS (ESTRICTO):\n" +
  "- Estructura: HTML5 vÃ¡lido + Tailwind CSS (CDN).\n" +
  "- DiseÃ±o: Usa el mismo esquema de colores y tipografÃ­a que el resto de la web.\n" +
  "- Header/Footer: Deben ser idÃ©nticos visualmente a la Home (usa la misma estructura de navegaciÃ³n).\n" +
  "- Contenido: RedacciÃ³n legal formal, adaptada a la normativa del paÃ­s, insertando los [DATOS_CONTACTO] dinÃ¡micamente.\n\n" +
  "--- INSTRUCCIÃ“N INICIAL ---\n" +
  "Analiza el paÃ­s [PAÃS].\n" +
  "Lista las pÃ¡ginas requeridas.\n" +
  "Genera INMEDIATAMENTE el cÃ³digo de la primera pÃ¡gina (usualmente PolÃ­tica de Privacidad).\n" +
  "Detente.";

P.P5="=== GENERADOR DE ECOSISTEMA TÃ‰CNICO SEO ===\n\n" +
  "INPUTS:\n" +
  "Dominio Base: [DOMINIO_RAIZ] (ej: https://miweb.com - SIN barra al final)\n" +
  "Inventario de Archivos: [LISTA_DE_ARCHIVOS] (Lista todos los .html: index.html, contacto.html, privacy.html...)\n\n" +
  "ROL:\n" +
  "Eres un Senior Technical SEO Specialist. Tu misiÃ³n es maximizar la \"Crawlability\" (rastreabilidad) del sitio generando archivos de configuraciÃ³n con sintaxis XML/TXT perfecta.\n\n" +
  "PROTOCOLO DE EJECUCIÃ“N:\n" +
  "1. PROCESAMIENTO DE URLs:\n" +
  "   - Convierte cada archivo en su URL Absoluta (Dominio + Archivo).\n" +
  "   - EXCEPCIÃ“N CRÃTICA: Si el archivo es 'index.html', la URL pÃºblica debe ser la raÃ­z (/).\n" +
  "   - Asegura formato de fecha W3C (YYYY-MM-DD) para hoy.\n\n" +
  "2. GENERACIÃ“N DE ARCHIVOS:\n" +
  "   A) ROBOTS.TXT:\n" +
  "      - User-agent universal (*).\n" +
  "      - Allow: / (Permitir todo).\n" +
  "      - Sitemap: [Inserta la URL absoluta del sitemap].\n" +
  "   B) SITEMAP.XML:\n" +
  "      - Cabecera XML estÃ¡ndar UTF-8.\n" +
  "      - Itera sobre la lista de archivos.\n" +
  "      - <loc>: URL Absoluta.\n" +
  "      - <lastmod>: Fecha actual.\n" +
  "      - <changefreq>: 'monthly' para legales/estÃ¡ticas, 'weekly' para blog/calculadoras.\n" +
  "      - <priority>: 1.0 para la Home, 0.8 para contenido core, 0.5 para legales.\n\n" +
  "OUTPUT:\n" +
  "EntrÃ©game dos bloques de cÃ³digo CLARAMENTE SEPARADOS (uno para robots.txt y otro para sitemap.xml) listos para guardar.";

P.P6="=== ASISTENTE DE DEVOPS & DNS ===\n\nCONTEXTO:\nTengo una web estÃ¡tica (HTML/CSS).\nHosting: Vercel (conectado vÃ­a GitHub).\nDominio: Comprado en Cloudflare.\n\nPROBLEMA ACTUAL:\n[DESCRIBE TU ERROR: Ej. \"Mi web se ve bien en local pero en Vercel no cargan los estilos\" o \"No sÃ© quÃ© registros DNS poner en Cloudflare\"].\n\nSOLICITUD:\nDame una guÃ­a paso a paso para solucionar este error especÃ­fico y verificar que mi web estÃ© online.";

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HELPERS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function el(tag,attrs){
  var e=document.createElement(tag);
  if(!attrs)return e;
  if(attrs.cls)e.className=attrs.cls;
  if(attrs.id)e.id=attrs.id;
  if(attrs.html)e.innerHTML=attrs.html;
  if(attrs.text)e.textContent=attrs.text;
  if(attrs.css)Object.assign(e.style,attrs.css);
  if(attrs.onclick)e.addEventListener('click',attrs.onclick);
  return e;
}
function add(parent){for(var i=1;i<arguments.length;i++)if(arguments[i])parent.appendChild(arguments[i]);return parent}

function mkSectionTitle(txt){return el('h3',{cls:'section-title',html:txt})}
function mkStepList(steps){return el('ol',{cls:'step-list',html:steps.map(function(s){return '<li>'+s+'</li>'}).join('')})}
function mkParagraph(innerHTML){return el('p',{html:innerHTML,css:{color:'#94a3b8',fontSize:'14px',lineHeight:'1.8'}})}
function mkInfoBox(bgColor,borderColor,innerHTML){var d=el('div',{cls:'info-box',html:innerHTML});d.style.background=bgColor;d.style.border='1px solid '+borderColor;return d}

function mkPromptBlock(title,note,promptKey,overrideText){
  var block=el('div',{cls:'prompt-block'});
  var arrow=el('span',{cls:'prompt-arrow',text:'â–¼'});
  var toggle=el('button',{cls:'prompt-toggle'});
  toggle.innerHTML='<span style="display:flex;align-items:center;gap:10px"><span style="color:#f59e0b;font-size:18px">ğŸ“„</span>'+title+'</span>';
  toggle.appendChild(arrow);
  var body=el('div',{cls:'prompt-body',css:{display:'none'}});
  if(note)add(body,el('p',{html:note,css:{color:'#f59e0b',fontSize:'13px',marginBottom:'14px',fontStyle:'italic',lineHeight:'1.5'}}));
  
  var textToCopy = overrideText || P[promptKey];
  
  var copyBtn=el('button',{cls:'copy-btn',text:'ğŸ“‹ Copiar prompt',onclick:function(){
    navigator.clipboard.writeText(textToCopy).then(function(){
      copyBtn.textContent='âœ“ Copiado';copyBtn.classList.add('copied');
      setTimeout(function(){copyBtn.textContent='ğŸ“‹ Copiar prompt';copyBtn.classList.remove('copied')},2000);
    });
  }});
  add(body,el('div',{css:{display:'flex',justifyContent:'flex-end',marginBottom:'10px'}}).appendChild(copyBtn).parentNode);
  var pre=el('pre',{cls:'prompt-pre'});pre.textContent=textToCopy;
  add(body,pre);
  toggle.addEventListener('click',function(){var v=body.style.display==='none';body.style.display=v?'block':'none';arrow.classList.toggle('open',v)});
  return add(block,toggle,body);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CONTENT RENDERERS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function phaseContent1(c){
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Generar <strong style="color:#f59e0b">100 ideas de nichos SEO</strong> rentables.'));
  add(c,mkSectionTitle('ğŸ“ Pasos a seguir'),mkStepList(['Copia el prompt','Personaliza [PAÃS-DESTINO]','Recibe la tabla CSV','Elige 1 nicho que te apasione']));
  add(c,mkSectionTitle('ğŸ“„ Prompt: Generador de Ideas'),mkPromptBlock('PROMPT 1 â€” 100 Nichos','Personaliza [PAÃS-DESTINO]','P1'));
}

function phaseContent2(c){
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Analizar la <strong style="color:#f59e0b">Competencia</strong> y definir la <strong style="color:#f59e0b">Arquitectura de URLs</strong>.'));
  add(c,mkSectionTitle('ğŸ“ Pasos a seguir'),mkStepList(['Personaliza [NICHO], [KW], [PAÃS]','Ejecuta el prompt','Guarda la lista de URLs para el siguiente paso']));
  add(c,mkSectionTitle('ğŸ“„ Prompt: AnÃ¡lisis Competencia'),mkPromptBlock('PROMPT 2 â€” AnÃ¡lisis & Arquitectura','Personaliza inputs','P2'));
}

function phaseContent3(c){
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Analizar la arquitectura y generar <strong style="color:#f59e0b">prompts de desarrollo individuales</strong> para cada URL, asegurando <strong style="color:#f59e0b">coherencia global</strong> (Header/Footer/Branding).'));
  add(c,mkSectionTitle('ğŸ“ Pasos a seguir'),mkStepList([
    'Toma la arquitectura aprobada de Fase 2',
    'Personaliza: [NICHO], [BRANDING], [URLS-ARQUITECTURA]',
    'Pega el prompt: La IA definirÃ¡ primero los elementos globales',
    'IteraciÃ³n: Recibe el prompt para URL 1 â†’ Valida â†’ Escribe "Siguiente"',
    'Guarda cada prompt generado en un documento aparte para usarlo luego'
  ]));
  add(c,mkSectionTitle('ğŸ“„ Prompt: Arquitecto de Prompts'),mkPromptBlock('PROMPT 3 â€” System Design & Prompting Iterativo','Personaliza los inputs y ejecuta.','P3'));
  add(c,mkInfoBox('rgba(34,197,94,.08)','rgba(34,197,94,.25)','<p style="color:#4ade80;font-size:14px;font-weight:700;margin:0">âœ… Checklist de salida</p><div style="color:#94a3b8;font-size:13px;margin-top:10px;line-height:2">â˜‘ Header/Footer definidos<br>â˜‘ Enlaces mapeados<br>â˜‘ Prompt para URL 1 listo</div>'));
}

function phaseContent4(c){
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Generar las <strong style="color:#f59e0b">PÃ¡ginas Legales</strong> obligatorias para <strong style="color:#f59e0b">[PAÃS]</strong>, una por una.'));
  add(c,mkSectionTitle('ğŸ“ Pasos a seguir'),mkStepList([
    'Define tu ubicaciÃ³n: [PAÃS]',
    'Prepara datos: [Empresa], [DirecciÃ³n], [Email]',
    'Ejecuta el prompt: La IA listarÃ¡ las pÃ¡ginas necesarias',
    'IteraciÃ³n: Recibe HTML pÃ¡gina 1 â†’ Revisa â†’ "Siguiente"',
    'Guarda archivos con nombres estÃ¡ndar (privacy.html, terms.html)'
  ]));
  add(c,mkSectionTitle('ğŸ“„ Prompt: Legal Compliance'),mkPromptBlock('PROMPT 4 â€” Generador Legal Iterativo','Personaliza: [PAÃS], [DATOS]','P4'));
  add(c,mkInfoBox('rgba(239,68,68,.08)','rgba(239,68,68,.25)','<p style="color:#ef4444;font-size:13px;margin:0">âš ï¸ <strong>IMPORTANTE:</strong> La IA genera plantillas estÃ¡ndar. Revisa siempre los textos antes de publicar.</p>'));
}

function phaseContent5(c){
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Generar <strong style="color:#f59e0b">robots.txt</strong> y <strong style="color:#f59e0b">sitemap.xml</strong> para SEO.'));
  add(c,mkSectionTitle('ğŸ“ Pasos a seguir'),mkStepList([
    'Recopila nombres de TODOS tus archivos .html',
    'Define tu dominio final (ej: https://tudominio.com)',
    'Ejecuta el prompt para obtener ambos cÃ³digos',
    'Guarda los archivos en la raÃ­z del proyecto'
  ]));
  add(c,mkSectionTitle('ğŸ“„ Prompt: Technical SEO'),mkPromptBlock('PROMPT 5 â€” Robots & Sitemap','Personaliza: [DOMINIO], [LISTA_ARCHIVOS]','P5'));
  add(c,mkInfoBox('rgba(245,158,11,.08)','rgba(245,158,11,.25)','<p style="color:#fbbf24;font-size:13px;margin:0">âš ï¸ <strong>TIP:</strong> Sin sitemap.xml, Google tardarÃ¡ mucho mÃ¡s en indexar tus pÃ¡ginas profundas.</p>'));
}

function phaseContent6(c){
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Publicar tu web usando <strong style="color:#f59e0b">GitHub</strong>, <strong style="color:#f59e0b">Vercel</strong> y <strong style="color:#f59e0b">Cloudflare</strong>.'));
  add(c,mkSectionTitle('ğŸ“ Flujo de Lanzamiento'),mkStepList([
    'PREPARACIÃ“N: Renombra tu archivo principal a <code style="color:#f59e0b">index.html</code>.',
    'GITHUB: Crea repositorio y sube tus archivos.',
    'VERCEL: Conecta GitHub, importa repo y dale a "Deploy".',
    'DOMINIO: Compra en Cloudflare y configÃºralo en Vercel > Settings > Domains.'
  ]));
  add(c,mkSectionTitle('ğŸ“„ Prompt: Ayuda Despliegue'),mkPromptBlock('PROMPT 6 â€” Experto DevOps (Opcional)','Ãšsalo si tienes errores al subir la web.','P6'));
  add(c,mkInfoBox('rgba(59,130,246,.08)','rgba(59,130,246,.25)','<p style="color:#3b82f6;font-size:13px;margin:0">ğŸ’¡ Vercel se actualiza solo cada vez que subes cambios a GitHub.</p>'));
}

function phaseContent7(c){
  var cats=[
    {t:"Despliegue & Dominio",i:["Carga en HTTPS","No hay errores SSL","Vercel dice 'Ready'","VersiÃ³n mÃ³vil OK"]},
    {t:"SEO TÃ©cnico",i:["/robots.txt accesible","/sitemap.xml accesible","URLs limpias","Meta Titles Ãºnicos"]},
    {t:"UX & Legal",i:["MenÃº funciona","Footer en todas las URLs","Links legales funcionan","Contacto visible"]}
  ];
  var total=0;cats.forEach(function(cat){total+=cat.i.length});
  function countDone(){var n=0;for(var k in qaChecks)if(qaChecks[k])n++;return n}
  
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Auditar la web en <strong style="color:#22c55e">ProducciÃ³n</strong>.'));
  add(c,mkSectionTitle('âœ… Checklist de QA'));

  var barOuter=el('div',{css:{height:'8px',background:'rgba(255,255,255,.05)',borderRadius:'4px',marginBottom:'6px'}});
  var barInner=el('div',{css:{height:'100%',borderRadius:'4px',transition:'width .4s'}});
  barOuter.appendChild(barInner);
  var barText=el('p',{cls:'mono',css:{color:'#64748b',fontSize:'12px',marginTop:'6px',marginBottom:'20px'}});
  function updateBar(){
    var d=countDone(),pct=Math.round((d/total)*100);
    barInner.style.width=pct+'%';
    barInner.style.background=pct===100?'#22c55e':'linear-gradient(90deg,#f59e0b,#ef4444)';
    barText.textContent=d+'/'+total+' â€” '+pct+'% completado';
    barText.style.color=pct===100?'#22c55e':'#64748b';
  }
  updateBar();
  add(c,barOuter,barText);

  cats.forEach(function(cat,ci){
    add(c,el('h4',{html:cat.t,css:{color:'#cbd5e1',fontSize:'14px',marginBottom:'6px',marginTop:'16px'}}));
    cat.i.forEach(function(item,ii){
      var key=ci+'-'+ii+'-p7';
      var checked=!!qaChecks[key];
      var label=el('div',{cls:'check-item',css:{color:checked?'#22c55e':'#94a3b8',cursor:'pointer'}});
      var box=el('span',{cls:'check-box',text:checked?'âœ“':'',css:{border:checked?'2px solid #22c55e':'2px solid rgba(255,255,255,.18)',background:checked?'rgba(34,197,94,.12)':'transparent',color:'#22c55e'}});
      var txt=el('span',{text:item,css:{textDecoration:checked?'line-through':'none',opacity:checked?'.55':'1'}});
      label.addEventListener('click',function(){
        qaChecks[key]=!qaChecks[key];save();
        var ch=qaChecks[key];
        box.textContent=ch?'âœ“':'';box.style.border=ch?'2px solid #22c55e':'2px solid rgba(255,255,255,.18)';box.style.background=ch?'rgba(34,197,94,.12)':'transparent';
        txt.style.textDecoration=ch?'line-through':'none';txt.style.opacity=ch?'.55':'1';
        label.style.color=ch?'#22c55e':'#94a3b8';
        updateBar();
      });
      add(label,box,txt);c.appendChild(label);
    });
  });
}

function phaseContent8(c){
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Oficializar tu web ante Google y <strong style="color:#f59e0b">solicitar indexaciÃ³n</strong>.'));
  add(c,mkSectionTitle('1ï¸âƒ£ VerificaciÃ³n de Propiedad'),mkStepList([
    'Entra a Google Search Console > Propiedad "Dominio"',
    'Copia el registro TXT',
    'Ve a Cloudflare > DNS > Add Record (TXT)',
    'Espera 1 min y verifica en GSC'
  ]));
  add(c,mkSectionTitle('2ï¸âƒ£ Enviar Sitemap'),mkStepList([
    'En GSC > Sitemaps',
    'Escribe "sitemap.xml" y envÃ­a',
    'Verifica estado "Correcto"'
  ]));
  add(c,mkSectionTitle('3ï¸âƒ£ Solicitar IndexaciÃ³n'),mkStepList([
    'Pega tu URL en la barra superior de GSC',
    'Dale a "Solicitar IndexaciÃ³n"'
  ]));
  add(c,mkInfoBox('rgba(34,197,94,.08)','rgba(34,197,94,.25)','<p style="color:#22c55e;font-size:14px;font-weight:700;margin:0">ğŸ‰ Â¡WEB COMPLETADA!</p><p style="color:#94a3b8;font-size:13px;margin-top:8px">Has creado, validado, desarrollado, legalizado y publicado un activo digital.</p>'));
}

var phaseRenderers=[phaseContent1,phaseContent2,phaseContent3,phaseContent4,phaseContent5,phaseContent6,phaseContent7,phaseContent8];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CORE ENGINE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showPhase(id){
  var phase=PHASES.find(function(p){return p.id===id});
  var done=completed.indexOf(id)!==-1;
  var next=PHASES.find(function(p){return p.id===id+1});
  var app=document.getElementById('app');
  app.innerHTML='';

  // Nav
  var nav=el('div',{cls:'nav-bar'});
  var backBtn=el('button',{cls:'back-btn',text:'â† Volver al mapa',onclick:renderMap});
  var xpArea=el('div',{css:{display:'flex',alignItems:'center',gap:'12px'},html:'<span class="mono" style="color:#f59e0b;font-size:12px;font-weight:700">'+getXP()+' XP</span><div style="width:80px;height:6px;background:rgba(255,255,255,.06);border-radius:3px;overflow:hidden"><div style="height:100%;width:'+getPct()+'%;background:linear-gradient(90deg,#f59e0b,#ef4444);border-radius:3px"></div></div>'});
  add(nav,backBtn,xpArea);app.appendChild(nav);

  // Header
  var hdr=el('div',{css:{padding:'48px 20px 0',maxWidth:'780px',margin:'0 auto'}});
  hdr.innerHTML='<div style="display:flex;align-items:center;gap:14px;margin-bottom:8px"><span style="font-size:36px">'+phase.icon+'</span><div><div class="mono" style="color:#64748b;font-size:12px;font-weight:700;letter-spacing:2px">FASE '+phase.id+' DE '+PHASES.length+'</div><h1 style="font-size:clamp(22px,4vw,30px);font-weight:800;color:#f1f5f9;line-height:1.2;margin-top:4px">'+phase.title+'</h1></div></div><p style="color:#64748b;font-size:15px;margin-bottom:12px">'+phase.subtitle+'</p><div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:32px"><span class="mono" style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:8px;padding:5px 14px;font-size:12px;color:#64748b">â± '+phase.time+'</span><span class="mono" style="background:'+(done?'rgba(34,197,94,.1)':'rgba(245,158,11,.1)')+';border:1px solid '+(done?'rgba(34,197,94,.2)':'rgba(245,158,11,.2)')+';border-radius:8px;padding:5px 14px;font-size:12px;color:'+(done?'#4ade80':'#f59e0b')+';font-weight:700">'+(done?'âœ“ COMPLETADA':'+'+phase.xp+' XP')+'</span><span class="mono" style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:8px;padding:5px 14px;font-size:12px;color:#64748b">ğŸ¯ '+phase.output+'</span></div>';
  app.appendChild(hdr);

  // Body
  var body=el('div',{css:{maxWidth:'780px',margin:'0 auto',padding:'0 20px 60px',animation:'fadeIn .4s'}});
  phaseRenderers[phase.id-1](body);

  // Buttons
  var btns=el('div',{css:{marginTop:'40px'}});
  if(!done){
    var cb=el('button',{cls:'complete-btn mono',css:{background:'linear-gradient(135deg,#f59e0b,#d97706)',color:'#000'},text:'âœ… COMPLETAR FASE '+phase.id+' â€” RECLAMAR +'+phase.xp+' XP',onclick:function(){
      if(completed.indexOf(id)===-1){completed.push(id);save();showBadge(phase)}
      showPhase(id);
    }});
    btns.appendChild(cb);
  }
  if(done&&next){
    btns.appendChild(el('button',{cls:'complete-btn mono',css:{background:'linear-gradient(135deg,#22c55e,#16a34a)',color:'#fff'},text:'â†’ AVANZAR A FASE '+next.id+': '+next.title,onclick:function(){showPhase(next.id)}}));
  }
  if(done&&!next){
    btns.appendChild(el('button',{cls:'complete-btn mono',css:{background:'linear-gradient(135deg,#22c55e,#16a34a)',color:'#fff'},text:'ğŸ† VER RESUMEN FINAL',onclick:renderMap}));
  }
  body.appendChild(btns);
  app.appendChild(body);
  window.scrollTo({top:0,behavior:'smooth'});
}

function renderMap(){
  var app=document.getElementById('app');
  app.innerHTML='';
  var allDone=completed.length===PHASES.length;
  var xp=getXP(),pct=getPct(),lv=getLevel();

  // Hero
  var hero=el('div',{cls:'hero'});
  hero.innerHTML='<div class="hero-grid"></div><div class="hero-inner"><div class="hero-tag mono">PROFESSIONAL v3.0</div><h1 class="hero-title">SOP: Web de Calculadoras SEO</h1><p style="font-size:clamp(15px,2.5vw,18px);color:#64748b;margin-bottom:36px;line-height:1.6">De <strong style="color:#f59e0b">IDEA</strong> a <strong style="color:#22c55e">INDEXACIÃ“N</strong> en 8 pasos estratÃ©gicos.</p><div style="max-width:420px;margin:0 auto"><div style="display:flex;justify-content:space-between;align-items:baseline;margin-bottom:8px"><span class="mono" style="color:#f59e0b;font-weight:700;font-size:14px;'+(completed.length>0?'animation:glow 2s infinite':'')+'">LVL: '+lv+'</span><span class="mono" style="color:#64748b;font-size:13px">'+xp+'/'+TXP+' XP</span></div><div style="height:10px;background:rgba(255,255,255,.04);border-radius:5px;border:1px solid rgba(255,255,255,.06);overflow:hidden"><div style="height:100%;width:'+pct+'%;border-radius:5px;transition:width .8s cubic-bezier(.22,1,.36,1);'+(pct===100?'background:linear-gradient(90deg,#22c55e,#16a34a)':'background:linear-gradient(90deg,#f59e0b,#ef4444,#ec4899);box-shadow:0 0 12px rgba(245,158,11,.3)')+'"></div></div><div class="mono" style="display:flex;justify-content:space-between;margin-top:6px;font-size:11px;color:#475569"><span>'+completed.length+'/'+PHASES.length+' fases</span><span>'+pct+'%</span></div></div></div>';
  app.appendChild(hero);

  // Map List
  var wrap=el('div',{css:{maxWidth:'680px',margin:'0 auto',padding:'40px 20px 80px'}});

  PHASES.forEach(function(phase,idx){
    var done=completed.indexOf(phase.id)!==-1;
    var unlocked=phase.id===1||completed.indexOf(phase.id-1)!==-1;
    var isNext=!done&&unlocked;
    if(!done&&!isNext)return;

    var row=el('div',{css:{position:'relative',paddingLeft:'52px',marginBottom:'16px'}});
    if(idx<PHASES.length-1&&done){
      row.appendChild(el('div',{css:{position:'absolute',left:'21px',top:'48px',bottom:'-16px',width:'2px',background:'rgba(34,197,94,.25)'}}));
    }
    var dot=el('div',{cls:'mono',css:{position:'absolute',left:'8px',top:'16px',width:'28px',height:'28px',borderRadius:'50%',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'13px',fontWeight:'800',background:done?'#22c55e':'#f59e0b',color:done?'#fff':'#000',animation:isNext?'pulse 2s infinite':'none'},text:done?'âœ“':String(phase.id)});
    row.appendChild(dot);

    var card=el('div',{cls:'phase-card',css:{background:isNext?'linear-gradient(135deg,rgba(245,158,11,.08),rgba(245,158,11,.02))':'rgba(34,197,94,.03)',border:isNext?'1px solid rgba(245,158,11,.25)':'1px solid rgba(34,197,94,.12)'}});
    card.innerHTML='<div style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px"><div style="display:flex;align-items:center;gap:12px"><span style="font-size:24px">'+phase.icon+'</span><div><div style="font-size:16px;font-weight:700;color:'+(done?'#4ade80':'#e2e8f0')+'">Fase '+phase.id+': '+phase.title+'</div><div style="font-size:12px;color:#64748b;margin-top:2px">'+phase.subtitle+'</div></div></div><div style="display:flex;align-items:center;gap:8px"><span class="mono" style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:6px;padding:4px 12px;font-size:11px;color:#64748b">â± '+phase.time+'</span><span class="mono" style="background:'+(done?'rgba(34,197,94,.1)':'rgba(245,158,11,.1)')+';border:1px solid '+(done?'rgba(34,197,94,.2)':'rgba(245,158,11,.2)')+';border-radius:6px;padding:4px 12px;font-size:11px;color:'+(done?'#4ade80':'#f59e0b')+';font-weight:700">'+(done?'âœ“ DONE':'+'+phase.xp+' XP')+'</span><span style="color:#475569;font-size:16px;margin-left:4px">â†’</span></div></div>';
    card.addEventListener('click',(function(pid){return function(){showPhase(pid)}})(phase.id));
    row.appendChild(card);
    wrap.appendChild(row);
  });

  if(allDone){
    var fin=el('div',{css:{marginTop:'48px',padding:'44px 32px',background:'linear-gradient(145deg,rgba(34,197,94,.06),rgba(245,158,11,.04))',border:'2px solid rgba(34,197,94,.2)',borderRadius:'24px',textAlign:'center',animation:'fadeIn .6s'}});
    fin.innerHTML='<div style="font-size:60px;margin-bottom:16px">ğŸ†</div><h2 class="mono" style="font-size:28px;font-weight:800;margin-bottom:8px;background:linear-gradient(135deg,#22c55e,#f59e0b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text">Â¡PROYECTO TERMINADO!</h2><p style="color:#94a3b8;font-size:15px;margin-bottom:32px">Tu web estÃ¡ online, legal y en manos de Google.</p><div style="text-align:left;max-width:420px;margin:0 auto;color:#94a3b8;font-size:13px;line-height:2.4"><div><strong style="color:#f59e0b">Next Step:</strong> Crear backlinks de calidad.</div><div><strong style="color:#f59e0b">Next Step:</strong> Crear contenido recurrente.</div><div><strong style="color:#f59e0b">Next Step:</strong> Monitorizar keywords.</div></div>';
    var resetBtn=el('button',{css:{marginTop:'20px',background:'rgba(255,255,255,.06)',border:'1px solid rgba(255,255,255,.1)',color:'#64748b',padding:'10px 24px',borderRadius:'10px',cursor:'pointer',fontSize:'12px',fontFamily:'inherit'},text:'â†º Iniciar nuevo proyecto',onclick:function(){completed=[];qaChecks={};save();renderMap()}});
    fin.appendChild(resetBtn);
    wrap.appendChild(fin);
  }

  app.appendChild(wrap);
  window.scrollTo({top:0,behavior:'smooth'});
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• INIT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
renderMap();
</script>
</body>
</html>
