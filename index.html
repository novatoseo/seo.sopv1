<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SOP SEO Calculadoras â€” Gamificado</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;9..40,600;9..40,700;9..40,800&family=Space+Mono:wght@400;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{background:#080c14;color:#e2e8f0;font-family:'DM Sans','Segoe UI',system-ui,sans-serif;min-height:100vh;overflow-x:hidden}
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:rgba(255,255,255,.03)}
::-webkit-scrollbar-thumb{background:rgba(255,255,255,.1);border-radius:3px}
@keyframes fadeIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
@keyframes popIn{from{transform:scale(.7);opacity:0}to{transform:scale(1);opacity:1}}
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(245,158,11,.35)}50%{box-shadow:0 0 0 10px rgba(245,158,11,0)}}
@keyframes glow{0%,100%{text-shadow:0 0 20px rgba(245,158,11,.3)}50%{text-shadow:0 0 40px rgba(245,158,11,.6)}}
.mono{font-family:'Space Mono',monospace}
.code{font-family:'JetBrains Mono','Fira Code',monospace}
.hidden{display:none!important}
.badge-overlay{position:fixed;inset:0;z-index:9999;background:rgba(0,0,0,.75);backdrop-filter:blur(10px);display:flex;align-items:center;justify-content:center;animation:fadeIn .3s}
.badge-card{background:linear-gradient(145deg,#1e293b,#0f172a);border:2px solid #f59e0b;border-radius:28px;padding:52px 48px;text-align:center;box-shadow:0 0 100px rgba(245,158,11,.2);animation:popIn .4s cubic-bezier(.175,.885,.32,1.275);max-width:400px;width:90%}
.prompt-block{background:rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.07);border-radius:14px;margin-bottom:20px;overflow:hidden}
.prompt-toggle{width:100%;background:none;border:none;color:#e2e8f0;padding:18px 22px;display:flex;align-items:center;justify-content:space-between;cursor:pointer;font-family:inherit;font-size:15px;font-weight:700;text-align:left}
.prompt-toggle:hover{background:rgba(255,255,255,.02)}
.prompt-arrow{transition:transform .3s;font-size:11px;opacity:.4}
.prompt-arrow.open{transform:rotate(180deg)}
.prompt-body{padding:0 22px 22px}
.prompt-pre{background:rgba(0,0,0,.5);border:1px solid rgba(255,255,255,.05);border-radius:10px;padding:18px;color:#cbd5e1;font-size:12.5px;line-height:1.7;overflow-x:auto;white-space:pre-wrap;word-break:break-word;max-height:520px;overflow-y:auto;font-family:'JetBrains Mono','Fira Code',monospace}
.copy-btn{background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.12);color:#94a3b8;padding:6px 16px;border-radius:8px;font-size:12px;cursor:pointer;transition:all .25s;font-family:inherit;font-weight:600}
.copy-btn.copied{background:#22c55e;color:#fff;border-color:#22c55e}
.info-box{border-radius:12px;padding:18px;margin-top:16px}
.section-title{color:#e2e8f0;font-size:16px;font-weight:700;margin-top:32px;margin-bottom:14px;font-family:'Space Mono',monospace;border-bottom:1px solid rgba(255,255,255,.06);padding-bottom:10px}
.step-list{color:#cbd5e1;font-size:14px;line-height:2.2;padding-left:22px;margin:0}
.check-item{display:flex;align-items:flex-start;gap:10px;padding:7px 0;cursor:pointer;font-size:14px;line-height:1.5;transition:color .2s}
.check-box{width:22px;height:22px;min-width:22px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:12px;transition:all .2s;margin-top:1px}
.phase-card{border-radius:16px;padding:20px 24px;cursor:pointer;transition:all .2s}
.phase-card:hover{transform:translateX(4px)}
.complete-btn{width:100%;padding:18px 24px;border:none;border-radius:14px;font-size:16px;font-weight:800;cursor:pointer;font-family:'Space Mono',monospace;letter-spacing:1px;transition:transform .15s;margin-top:12px}
.complete-btn:active{transform:scale(.97)}
.nav-bar{background:rgba(0,0,0,.5);border-bottom:1px solid rgba(255,255,255,.06);padding:12px 20px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100;backdrop-filter:blur(16px)}
.back-btn{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);color:#94a3b8;padding:8px 18px;border-radius:8px;cursor:pointer;font-size:13px;font-family:inherit;font-weight:600;transition:all .2s}
.back-btn:hover{background:rgba(255,255,255,.1);color:#e2e8f0}
.sub-tab{padding:12px 22px;border-radius:10px;cursor:pointer;font-size:14px;font-weight:700;font-family:inherit;transition:all .2s;border:none;color:#fff}
.hero{background:linear-gradient(170deg,#0c1220,#0a0f1a 40%,#111827);border-bottom:1px solid rgba(255,255,255,.04);padding:56px 20px 52px;text-align:center;position:relative;overflow:hidden}
.hero-grid{position:absolute;inset:0;opacity:.04;background-image:linear-gradient(rgba(255,255,255,.1) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,.1) 1px,transparent 1px);background-size:48px 48px}
.hero-inner{position:relative;max-width:700px;margin:0 auto}
.hero-tag{display:inline-block;background:rgba(245,158,11,.1);border:1px solid rgba(245,158,11,.25);border-radius:8px;padding:6px 16px;font-size:12px;font-weight:700;color:#f59e0b;letter-spacing:2px;margin-bottom:20px}
.hero-title{font-size:clamp(28px,5vw,44px);font-weight:800;line-height:1.15;margin-bottom:16px;background:linear-gradient(135deg,#f1f5f9,#94a3b8);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
</style>
</head>
<body>

<div id="badge-popup" class="badge-overlay hidden" onclick="closeBadge()">
  <div class="badge-card" onclick="event.stopPropagation()">
    <div id="bp-icon" style="font-size:72px;margin-bottom:20px"></div>
    <div class="mono" style="color:#f59e0b;font-size:12px;font-weight:700;letter-spacing:5px;margin-bottom:8px">BADGE DESBLOQUEADO</div>
    <div id="bp-name" class="mono" style="color:#f1f5f9;font-size:30px;font-weight:800;margin-bottom:28px"></div>
    <button onclick="closeBadge()" style="background:linear-gradient(135deg,#f59e0b,#d97706);border:none;color:#000;font-weight:800;padding:14px 36px;border-radius:14px;cursor:pointer;font-size:15px;font-family:inherit">Â¡SIGUIENTE FASE!</button>
  </div>
</div>

<div id="app"></div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DATA â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
var PHASES=[
{id:1,icon:"ğŸ’¡",title:"Generar 100 Ideas de Nichos",subtitle:"Opciones infinitas. Elige la que TE APASIONE.",time:"8-10 min",xp:150,output:"Lista de 100 nichos viables",badge:"IDEATOR",bi:"ğŸ§ "},
{id:2,icon:"ğŸ”",title:"AnÃ¡lisis Competencia & Arquitectura",subtitle:"EspÃ­a a la competencia. Luego, supÃ©ralos.",time:"15-20 min",xp:250,output:"Lista de URLs con anÃ¡lisis",badge:"STRATEGIST",bi:"ğŸ¯"},
{id:3,icon:"ğŸ”‘",title:"Ingeniero de prompts",subtitle:"Encuentra las palabras clave que Google ADORA.",time:"12-15 min",xp:300,output:"Inputs organizados para cada URL",badge:"KEYWORD HUNTER",bi:"ğŸ¹"},
{id:4,icon:"âš™ï¸",title:"Crear URLs (Calc + Blog + Tools)",subtitle:"Cada pÃ¡gina = un archivo .html independiente",time:"5-10 min c/u",xp:500,output:"N URLs SEO optimizadas",badge:"BUILDER",bi:"ğŸ—ï¸"},
{id:5,icon:"âš–ï¸",title:"Crear PÃ¡ginas Legales",subtitle:"ProtecciÃ³n legal. Necesarias para operar.",time:"25-30 min",xp:200,output:"Privacidad, TÃ©rminos, Aviso Legal",badge:"COMPLIANT",bi:"ğŸ›¡ï¸"},
{id:6,icon:"ğŸ ",title:"PÃ¡gina Inicio + Header/Footer",subtitle:"Tu vitrina al mundo.",time:"15-17 min",xp:250,output:"index.html + header-footer.html",badge:"ARCHITECT",bi:"ğŸ›ï¸"},
{id:7,icon:"âœ…",title:"QA Final & PublicaciÃ³n",subtitle:"Ãšltimas revisiones. Luego: al mundo.",time:"10-15 min",xp:350,output:"Sitio completamente funcional",badge:"LAUNCHER",bi:"ğŸš€"}
];
var TXP=PHASES.reduce(function(s,p){return s+p.xp},0);

var completed=[];try{completed=JSON.parse(localStorage.getItem('sop_done')||'[]')}catch(e){}
var qaChecks={};try{qaChecks=JSON.parse(localStorage.getItem('sop_qa')||'{}')}catch(e){}

function save(){try{localStorage.setItem('sop_done',JSON.stringify(completed));localStorage.setItem('sop_qa',JSON.stringify(qaChecks))}catch(e){}}
function getXP(){var s=0;for(var i=0;i<completed.length;i++){var p=PHASES.find(function(x){return x.id===completed[i]});if(p)s+=p.xp}return s}
function getLevel(){var n=completed.length;return n===0?"NOVATO":n<=2?"APRENDIZ":n<=4?"PRO":n<=6?"EXPERTO":"MAESTRO SEO"}
function getPct(){return Math.round((getXP()/TXP)*100)}

function showBadge(p){document.getElementById('bp-icon').textContent=p.bi;document.getElementById('bp-name').textContent=p.badge;document.getElementById('badge-popup').classList.remove('hidden')}
function closeBadge(){document.getElementById('badge-popup').classList.add('hidden')}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PROMPTS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
var P={};
P.P1="=== GENERADOR DE 100 IDEAS DE NICHOS SEO RENTABLES ===\n\nCONTEXTO:\nSoy emprendedor digital que quiere crear sitios de calculadoras online para ganar dinero.\nObjetivo: Obtener 100 ideas de nichos REALES y VIABLES en [PAÃS-DESTINO].\n\nCRITERIOS DE FILTRO (ESTRICTOS):\n1. Volumen de bÃºsquedas: 600-10000/mes (debe tener demanda real)\n2. Competencia: BAJA-MEDIA (no dominado por Google o sitios gigantes)\n3. Potencial monetario: EUR 500-3000+/mes realista\n4. ValidaciÃ³n: Que EXISTA demanda real en [PAÃS-DESTINO]\n5. Calculadora viable: Que tenga sentido crear una herramienta interactiva\n\nINSTRUCCIONES DE ANÃLISIS:\nPara cada nicho, debes:\n- Pensar COMO PERSONA que vive en [PAÃS-DESTINO]\n- Entender necesidades reales y psicologÃ­a del mercado\n- Investigar micronichos no saturados\n- Considerar estacionalidad y tendencias\n- Pensar en PROBLEMAS reales que la gente resuelve con calculadoras\n\nDIVERSIDAD DE CATEGORÃAS:\nIncluye nichos de:\n- Finanzas (hipotecas, crÃ©ditos, impuestos, inversiones)\n- ConstrucciÃ³n & Hogar (presupuestos, materiales, reforma)\n- Salud & Fitness (calorÃ­as, IMC, edad biolÃ³gica, etc.)\n- EducaciÃ³n (becas, costos estudio, etc.)\n- EnergÃ­a (consumo elÃ©ctrico, solar, etc.)\n- Seguros (cÃ¡lculo de primas, etc.)\n- Viajes (presupuestos, conversiones)\n- Negocios (mÃ¡rgenes, ROI, payback, etc.)\n- Automotor (financiamiento, consumo combustible)\n- Y mÃ¡s...\n\nFORMATO DE RESPUESTA (OBLIGATORIO):\nDevuelve EXACTAMENTE 100 ideas en este formato CSV:\n\nRanking | Nicho | Palabra Clave Principal | Volumen/Mes Est. | Viabilidad | Por QuÃ© Funciona | Potencial Mensual EUR | CategorÃ­a\n\nEjemplo de filas:\n1 | Calculadora de Hipotecas | \"hypothekenrechner\" | 1800 | ALTA | Alemanes buscan financiamiento. Alto ticket. | 1500-2500 | Finanzas\n2 | Calculadora de Impuestos | \"steuerrechner\" | 2100 | ALTA | Anual. Millones lo buscan. Recurrente. | 1200-2000 | Impuestos\n\nREGLAS IMPORTANTES:\n- NO repitas nichos (cada uno Ãºnico)\n- Los volÃºmenes deben ser REALISTAS\n- Incluye nichos obvios Y nichos ocultos\n- Prioriza \"evergreen\"\n- Considera demanda REAL, no especulaciÃ³n\n\nAHORA GENERA LOS 100 NICHOS.\nResponde en formato CSV directo (sin preamble ni explicaciones).";

P.P2="=== ANÃLISIS COMPETIDOR & ARQUITECTURA DE URLs ===\n\nCONTEXTO:\nElegÃ­ el nicho: [NICHO-ELEGIDO]\nPalabra clave principal: [PALABRA-CLAVE-PRINCIPAL]\nPaÃ­s/Idioma: [PAÃS-IDIOMA]\n\nPARTE 1: ANÃLISIS DE COMPETENCIA\n\nNecesito que analices a los competidores TOP 10 de esta palabra clave:\n- Â¿CuÃ¡ntas URLs/pÃ¡ginas tienen cada sitio?\n- Â¿CuÃ¡l es la estructura de navegaciÃ³n?\n- Â¿Tienen calculadora, blog, o ambas?\n- Â¿QuÃ© palabras clave secundarias atacan?\n- Â¿CuÃ¡ntos artÃ­culos de blog?\n- Â¿Tienen \"tools\" o herramientas secundarias?\n\nRespuesta formato:\n**Competidor 1 (sitio):**\n- URLs totales: [nÃºmero]\n- Estructura: [descripciÃ³n]\n- Herramientas: [lista]\n- Palabras clave: [lista de 5 principales]\n- Estrategia: [resumen]\n[Repite para competidores 2-10]\n\nPARTE 2: ANÃLISIS DE GAPS\n- Â¿QuÃ© URLs crean los competidores?\n- Â¿QuÃ© Keywords NO atacan (oportunidades)?\n- Â¿QuÃ© long-tail desatendidas?\n- Â¿Hay demanda sin oferta?\n\nPARTE 3: ARQUITECTURA RECOMENDADA\n1. Â¿CuÃ¡ntas URLs MÃNIMO? JUSTIFICA.\n2. Para CADA URL: Nombre, URL amigable, KW objetivo, BÃºsquedas/mes, Tipo, JustificaciÃ³n, Dificultad SEO, Prioridad.\n3. Estructura en orden de importancia.\n\nPARTE 4: VENTAJA COMPETITIVA\nÂ¿CÃ³mo SUPERAR a la competencia? 3-5 acciones especÃ­ficas.\n\nFORMATO FINAL (TABLA):\n| Prioridad | Tipo | URL | Palabra Clave | Volumen | Dificultad | Por QuÃ© |\n\nRESPONDE TODAS LAS PARTES EN ORDEN.";

P.P3="=== ARQUITECTO DE PROMPTS WEB & SYSTEM DESIGN ===\n\n" +
  "INPUTS:\n" +
  "Nicho: [NICHO]\n" +
  "Branding/Estilo: [BRANDING] (Ej: Minimalista, azul corporativo, fuente sans-serif)\n" +
  "Arquitectura de URLs: [URLS-ARQUITECTURA] (Lista completa del paso anterior)\n\n" +
  "ROL:\n" +
  "Eres un Senior Frontend Architect y Prompt Engineer. Tu tarea NO es escribir el cÃ³digo HTML ahora, sino diseÃ±ar los \"Prompts de InstrucciÃ³n\" perfectos para que un Junior AI Developer codifique la web paso a paso en la siguiente fase.\n\n" +
  "REGLAS DE ORO (CONSISTENCIA GLOBAL):\n" +
  "1. SINGLE SOURCE OF TRUTH: Define primero un Header (con navegaciÃ³n basada en la Arquitectura) y un Footer estÃ¡ndar. Estos deben inyectarse en CADA prompt individual.\n" +
  "2. NAVEGACIÃ“N REAL: Los enlaces generados deben apuntar a las URLs definidas (ej: href=\"servicios.html\"), no a \"#\".\n\n" +
  "ALGORITMO DE EJECUCIÃ“N (ITERATIVO):\n" +
  "1. ANALIZA la arquitectura y define mentalmente el bloque Header/Footer global.\n" +
  "2. GENERA el Prompt de Desarrollo para la PRIMERA URL de la lista.\n" +
  "3. DETENTE y espera mi instrucciÃ³n.\n" +
  "4. Cuando yo escriba \"Siguiente\", genera el prompt para la segunda URL, manteniendo estrictamente la coherencia del Header/Footer.\n\n" +
  "FORMATO DE SALIDA (Para cada URL):\n" +
  "Genera un bloque de cÃ³digo listo para copiar que contenga:\n" +
  "\"ActÃºa como Experto Web. Genera el cÃ³digo HTML5 completo (con Tailwind CSS vÃ­a CDN) para la pÃ¡gina: [NOMBRE_URL].\n" +
  "- Title Tag SEO: [TÃ­tulo Optimizado]\n" +
  "- Estructura Visual: [Instrucciones de diseÃ±o]\n" +
  "- Header Global: [Instrucciones precisas del menÃº y logo]\n" +
  "- Footer Global: [Instrucciones precisas de enlaces legales y sitemap]\n" +
  "- Contenido Principal: [Secciones especÃ­ficas para esta URL: H1, Textos, CTAs, Features]\"\n\n" +
  "--- INSTRUCCIÃ“N FINAL ---\n" +
  "Comienza analizando las URLs y entrÃ©game SOLO el prompt para la URL #1 (Home). Al final pregunta: \"Â¿Validas este prompt para pasar a la siguiente?\"";

P.P4="=== GENERADOR DE ECOSISTEMA LEGAL & COMPLIANCE (MODO ITERATIVO) ===\n\n" +
  "INPUTS:\n" +
  "PaÃ­s de OperaciÃ³n: [PAÃS] (Define la jurisdicciÃ³n: RGPD, CCPA, LGPD, etc.)\n" +
  "Nombre del Proyecto: [NOMBRE_WEB]\n" +
  "Datos del Responsable: [DATOS_CONTACTO_COMPLETOS] (Nombre/Empresa, DirecciÃ³n, Email, NIF/Tax ID)\n" +
  "Estilo Visual: [BRANDING] (Mismo que fase anterior)\n\n" +
  "ROL:\n" +
  "Eres un Abogado Digital Experto en Compliance y un Senior Frontend Developer.\n" +
  "Tu objetivo es blindar legalmente el proyecto generando las pÃ¡ginas obligatorias una a una, asegurando coherencia tÃ©cnica con el resto del sitio.\n\n" +
  "PROTOCOLO DE EJECUCIÃ“N:\n" +
  "1. ANÃLISIS NORMATIVO: Basado en el [PAÃS], lista quÃ© pÃ¡ginas son estrictamente obligatorias (ej: EspaÃ±a -> Aviso Legal, Privacidad, Cookies, Condiciones).\n" +
  "2. DESARROLLO ITERATIVO:\n" +
  "   - No generes todo el cÃ³digo de golpe.\n" +
  "   - Genera el cÃ³digo HTML completo para la PRIMERA pÃ¡gina de la lista.\n" +
  "   - Detente y pregunta: \"Â¿Validas los datos y el diseÃ±o? Â¿Pasamos a la siguiente?\".\n\n" +
  "REQUISITOS TÃ‰CNICOS (ESTRICTO):\n" +
  "- Estructura: HTML5 vÃ¡lido + Tailwind CSS (CDN).\n" +
  "- DiseÃ±o: Usa el mismo esquema de colores y tipografÃ­a que el resto de la web.\n" +
  "- Header/Footer: Deben ser idÃ©nticos visualmente a la Home (usa la misma estructura de navegaciÃ³n).\n" +
  "- Contenido: RedacciÃ³n legal formal, adaptada a la normativa del paÃ­s, insertando los [DATOS_CONTACTO] dinÃ¡micamente.\n\n" +
  "--- INSTRUCCIÃ“N INICIAL ---\n" +
  "Analiza el paÃ­s [PAÃS].\n" +
  "Lista las pÃ¡ginas requeridas.\n" +
  "Genera INMEDIATAMENTE el cÃ³digo de la primera pÃ¡gina (usualmente PolÃ­tica de Privacidad).\n" +
  "Detente.";

P.P5="=== GENERADOR DE ECOSISTEMA TÃ‰CNICO SEO ===\n\n" +
  "INPUTS:\n" +
  "Dominio Base: [DOMINIO_RAIZ] (ej: https://miweb.com - SIN barra al final)\n" +
  "Inventario de Archivos: [LISTA_DE_ARCHIVOS] (Lista todos los .html: index.html, contacto.html, privacy.html...)\n\n" +
  "ROL:\n" +
  "Eres un Senior Technical SEO Specialist. Tu misiÃ³n es maximizar la \"Crawlability\" (rastreabilidad) del sitio generando archivos de configuraciÃ³n con sintaxis XML/TXT perfecta.\n\n" +
  "PROTOCOLO DE EJECUCIÃ“N:\n" +
  "1. PROCESAMIENTO DE URLs:\n" +
  "   - Convierte cada archivo en su URL Absoluta (Dominio + Archivo).\n" +
  "   - EXCEPCIÃ“N CRÃTICA: Si el archivo es 'index.html', la URL pÃºblica debe ser la raÃ­z (/).\n" +
  "   - Asegura formato de fecha W3C (YYYY-MM-DD) para hoy.\n\n" +
  "2. GENERACIÃ“N DE ARCHIVOS:\n" +
  "   A) ROBOTS.TXT:\n" +
  "      - User-agent universal (*).\n" +
  "      - Allow: / (Permitir todo).\n" +
  "      - Sitemap: [Inserta la URL absoluta del sitemap].\n" +
  "   B) SITEMAP.XML:\n" +
  "      - Cabecera XML estÃ¡ndar UTF-8.\n" +
  "      - Itera sobre la lista de archivos.\n" +
  "      - <loc>: URL Absoluta.\n" +
  "      - <lastmod>: Fecha actual.\n" +
  "      - <changefreq>: 'monthly' para legales/estÃ¡ticas, 'weekly' para blog/calculadoras.\n" +
  "      - <priority>: 1.0 para la Home, 0.8 para contenido core, 0.5 para legales.\n\n" +
  "OUTPUT:\n" +
  "EntrÃ©game dos bloques de cÃ³digo CLARAMENTE SEPARADOS (uno para robots.txt y otro para sitemap.xml) listos para guardar.";

P.P6='=== ASISTENTE DE DEVOPS & DNS ===\n\nCONTEXTO:\nTengo una web estÃ¡tica (HTML/CSS).\nHosting: Vercel (conectado vÃ­a GitHub).\nDominio: Comprado en Cloudflare.\n\nPROBLEMA ACTUAL:\n[DESCRIBE TU ERROR: Ej. "Mi web se ve bien en local pero en Vercel no cargan los estilos" o "No sÃ© quÃ© registros DNS poner en Cloudflare"].\n\nSOLICITUD:\nDame una guÃ­a paso a paso para solucionar este error especÃ­fico y verificar que mi web estÃ© online.'

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DOM HELPERS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function el(tag,attrs){
  var e=document.createElement(tag);
  if(!attrs)return e;
  if(attrs.cls)e.className=attrs.cls;
  if(attrs.id)e.id=attrs.id;
  if(attrs.html)e.innerHTML=attrs.html;
  if(attrs.text)e.textContent=attrs.text;
  if(attrs.css)Object.assign(e.style,attrs.css);
  if(attrs.onclick)e.addEventListener('click',attrs.onclick);
  return e;
}
function add(parent){for(var i=1;i<arguments.length;i++)if(arguments[i])parent.appendChild(arguments[i]);return parent}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• REUSABLE BUILDERS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function mkSectionTitle(txt){return el('h3',{cls:'section-title',html:txt})}
function mkStepList(steps){return el('ol',{cls:'step-list',html:steps.map(function(s){return '<li>'+s+'</li>'}).join('')})}
function mkParagraph(innerHTML){return el('p',{html:innerHTML,css:{color:'#94a3b8',fontSize:'14px',lineHeight:'1.8'}})}
function mkInfoBox(bgColor,borderColor,innerHTML){var d=el('div',{cls:'info-box',html:innerHTML});d.style.background=bgColor;d.style.border='1px solid '+borderColor;return d}

function mkPromptBlock(title,note,promptKey){
  var block=el('div',{cls:'prompt-block'});
  var arrow=el('span',{cls:'prompt-arrow',text:'â–¼'});
  var toggle=el('button',{cls:'prompt-toggle'});
  toggle.innerHTML='<span style="display:flex;align-items:center;gap:10px"><span style="color:#f59e0b;font-size:18px">ğŸ“„</span>'+title+'</span>';
  toggle.appendChild(arrow);
  var body=el('div',{cls:'prompt-body',css:{display:'none'}});
  if(note)add(body,el('p',{html:note,css:{color:'#f59e0b',fontSize:'13px',marginBottom:'14px',fontStyle:'italic',lineHeight:'1.5'}}));
  var copyBtn=el('button',{cls:'copy-btn',text:'ğŸ“‹ Copiar prompt',onclick:function(){
    navigator.clipboard.writeText(P[promptKey]).then(function(){
      copyBtn.textContent='âœ“ Copiado';copyBtn.classList.add('copied');
      setTimeout(function(){copyBtn.textContent='ğŸ“‹ Copiar prompt';copyBtn.classList.remove('copied')},2000);
    });
  }});
  add(body,el('div',{css:{display:'flex',justifyContent:'flex-end',marginBottom:'10px'}}).appendChild(copyBtn).parentNode);
  var pre=el('pre',{cls:'prompt-pre'});pre.textContent=P[promptKey];
  add(body,pre);
  toggle.addEventListener('click',function(){var v=body.style.display==='none';body.style.display=v?'block':'none';arrow.classList.toggle('open',v)});
  return add(block,toggle,body);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PHASE CONTENT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function phaseContent1(c){
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Generar <strong style="color:#f59e0b">100 ideas de nichos SEO</strong> rentables para sitios de calculadoras. Cada nicho validado con volumen, viabilidad y potencial monetario.'));
  add(c,mkSectionTitle('ğŸ“ Pasos a seguir'),mkStepList(['Copia el prompt de abajo','Personaliza SOLO [PAÃS-DESTINO] (ej: Alemania, EspaÃ±aâ€¦)','Pega el prompt en tu IA preferida','Recibe la tabla CSV con 100 nichos','Elige 1 nicho â€” el que MÃS te apasione']));
  add(c,mkSectionTitle('ğŸ“„ Prompt: Generador de 100 Ideas (v3.0)'),mkPromptBlock('PROMPT 1 â€” Generador de 100 Ideas de Nichos SEO','Formato de salida: CSV. Personaliza SOLO [PAÃS-DESTINO].','P1'));
  add(c,mkInfoBox('rgba(245,158,11,.08)','rgba(245,158,11,.25)','<p style="color:#fbbf24;font-size:14px;margin:0;font-weight:700">ğŸ“‹ Output esperado</p><p style="color:#94a3b8;font-size:13px;margin-top:8px;margin-bottom:0">CSV con 100 filas: Ranking | Nicho | Palabra Clave | Volumen | Viabilidad | JustificaciÃ³n | Potencial | CategorÃ­a</p>'));
}
function phaseContent2(c){
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Analizar los <strong style="color:#f59e0b">TOP 10 competidores</strong> de tu nicho, encontrar gaps y diseÃ±ar la arquitectura completa de URLs.'));
  add(c,mkSectionTitle('ğŸ“ Pasos a seguir'),mkStepList(['Toma el nicho elegido en Fase 1','Personaliza: [NICHO-ELEGIDO], [PALABRA-CLAVE-PRINCIPAL], [PAÃS-IDIOMA]','Copia y pega el prompt','ObtÃ©n anÃ¡lisis + arquitectura recomendada','Guarda la tabla â€” la necesitarÃ¡s en Fase 3']));
  add(c,mkSectionTitle('ğŸ“„ Prompt: AnÃ¡lisis Competencia (v2.0)'),mkPromptBlock('PROMPT 2 â€” AnÃ¡lisis Competencia & Arquitectura URLs','Personaliza: [NICHO-ELEGIDO], [PALABRA-CLAVE-PRINCIPAL], [PAÃS-IDIOMA]','P2'));
  add(c,mkInfoBox('rgba(245,158,11,.08)','rgba(245,158,11,.25)','<p style="color:#fbbf24;font-size:14px;margin:0;font-weight:700">ğŸ“‹ Output esperado</p><p style="color:#94a3b8;font-size:13px;margin-top:8px;margin-bottom:0">AnÃ¡lisis detallado + tabla final de arquitectura de URLs</p>'));
}
function phaseContent3(c){
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Analizar la arquitectura y generar <strong style="color:#f59e0b">prompts de desarrollo individuales</strong> para cada URL, asegurando <strong style="color:#f59e0b">coherencia global</strong> (Header/Footer/Branding) y validaciÃ³n paso a paso.'));
  
  add(c,mkSectionTitle('ğŸ“ Pasos a seguir'),mkStepList([
    'Toma la arquitectura aprobada de Fase 2',
    'Personaliza: [NICHO], [BRANDING], [URLS-ARQUITECTURA]',
    'Pega el prompt: La IA definirÃ¡ primero los elementos globales',
    'IteraciÃ³n: Recibe el prompt para URL 1 â†’ Valida â†’ Escribe "Siguiente"',
    'Guarda cada prompt generado en un documento aparte para usarlo en la Fase 4'
  ]));

  var p3Text = "=== ARQUITECTO DE PROMPTS WEB & SYSTEM DESIGN ===\n\n" +
  "INPUTS:\n" +
  "Nicho: [NICHO]\n" +
  "Branding/Estilo: [BRANDING] (Ej: Minimalista, azul corporativo, fuente sans-serif)\n" +
  "Arquitectura de URLs: [URLS-ARQUITECTURA] (Lista completa del paso anterior)\n\n" +
  "ROL:\n" +
  "Eres un Senior Frontend Architect y Prompt Engineer. Tu tarea NO es escribir el cÃ³digo HTML ahora, sino diseÃ±ar los \"Prompts de InstrucciÃ³n\" perfectos para que un Junior AI Developer codifique la web paso a paso en la siguiente fase.\n\n" +
  "REGLAS DE ORO (CONSISTENCIA GLOBAL):\n" +
  "1. SINGLE SOURCE OF TRUTH: Define primero un Header (con navegaciÃ³n basada en la Arquitectura) y un Footer estÃ¡ndar. Estos deben inyectarse en CADA prompt individual.\n" +
  "2. NAVEGACIÃ“N REAL: Los enlaces generados deben apuntar a las URLs definidas (ej: href=\"servicios.html\"), no a \"#\".\n\n" +
  "ALGORITMO DE EJECUCIÃ“N (ITERATIVO):\n" +
  "1. ANALIZA la arquitectura y define mentalmente el bloque Header/Footer global.\n" +
  "2. GENERA el Prompt de Desarrollo para la PRIMERA URL de la lista.\n" +
  "3. DETENTE y espera mi instrucciÃ³n.\n" +
  "4. Cuando yo escriba \"Siguiente\", genera el prompt para la segunda URL, manteniendo estrictamente la coherencia del Header/Footer.\n\n" +
  "FORMATO DE SALIDA (Para cada URL):\n" +
  "Genera un bloque de cÃ³digo listo para copiar que contenga:\n" +
  "\"ActÃºa como Experto Web. Genera el cÃ³digo HTML5 completo (con Tailwind CSS vÃ­a CDN) para la pÃ¡gina: [NOMBRE_URL].\n" +
  "- Title Tag SEO: [TÃ­tulo Optimizado]\n" +
  "- Estructura Visual: [Instrucciones de diseÃ±o]\n" +
  "- Header Global: [Instrucciones precisas del menÃº y logo]\n" +
  "- Footer Global: [Instrucciones precisas de enlaces legales y sitemap]\n" +
  "- Contenido Principal: [Secciones especÃ­ficas para esta URL: H1, Textos, CTAs, Features]\"\n\n" +
  "--- INSTRUCCIÃ“N FINAL ---\n" +
  "Comienza analizando las URLs y entrÃ©game SOLO el prompt para la URL #1 (Home). Al final pregunta: \"Â¿Validas este prompt para pasar a la siguiente?\"";

  add(c,mkSectionTitle('ğŸ“„ Prompt: Arquitecto de Prompts (v3.0)'),mkPromptBlock('PROMPT 3 â€” System Design & Prompting Iterativo','Personaliza los inputs y ejecuta.','P3', p3Text));
  
  add(c,mkInfoBox('rgba(34,197,94,.08)','rgba(34,197,94,.25)','<p style="color:#4ade80;font-size:14px;font-weight:700;margin:0">âœ… Checklist de salida</p><div style="color:#94a3b8;font-size:13px;margin-top:10px;line-height:2">â˜‘ Elementos globales (Header/Footer) definidos<br>â˜‘ Enlaces mapeados segÃºn arquitectura<br>â˜‘ Prompt de desarrollo para URL 1 listo<br>â˜‘ Sistema de validaciÃ³n activo</div>'));
  
  add(c,mkInfoBox('rgba(245,158,11,.08)','rgba(245,158,11,.25)','<p style="color:#fbbf24;font-size:13px;margin:0">âš ï¸ <strong>IMPORTANTE:</strong> No dejes que la IA genere todas las URLs de golpe. Hazlo una a una para verificar que el <strong>MenÃº de NavegaciÃ³n</strong> siempre incluye los enlaces correctos.</p>'));
}
function phaseContent4(c){
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Generar las <strong style="color:#f59e0b">PÃ¡ginas Legales y de Confianza</strong> obligatorias para <strong style="color:#f59e0b">[PAÃS]</strong>, manteniendo la identidad visual y estructura tÃ©cnica del sitio.'));

  add(c,mkSectionTitle('ğŸ“ Flujo de Trabajo'),mkStepList([
    'Define tu ubicaciÃ³n: [PAÃS] (Determina la normativa: RGPD, LOPD, CCPA, etc.)',
    'Prepara tus datos: [Nombre Empresa/DueÃ±o], [DirecciÃ³n], [Email], [NIF/CIF/ID]',
    'Ejecuta el prompt: La IA analizarÃ¡ la ley local y listarÃ¡ las pÃ¡ginas',
    'IteraciÃ³n: Recibe el HTML de la pÃ¡gina 1 â†’ Revisa datos â†’ Escribe "Siguiente"',
    'Guarda cada archivo con el nombre exacto que definiste en el Footer de la Fase 3'
  ]));

  var p4Text = "=== GENERADOR DE ECOSISTEMA LEGAL & COMPLIANCE (MODO ITERATIVO) ===\n\n" +
  "INPUTS:\n" +
  "PaÃ­s de OperaciÃ³n: [PAÃS] (Define la jurisdicciÃ³n: RGPD, CCPA, LGPD, etc.)\n" +
  "Nombre del Proyecto: [NOMBRE_WEB]\n" +
  "Datos del Responsable: [DATOS_CONTACTO_COMPLETOS] (Nombre/Empresa, DirecciÃ³n, Email, NIF/Tax ID)\n" +
  "Estilo Visual: [BRANDING] (Mismo que fase anterior)\n\n" +
  "ROL:\n" +
  "Eres un Abogado Digital Experto en Compliance y un Senior Frontend Developer.\n" +
  "Tu objetivo es blindar legalmente el proyecto generando las pÃ¡ginas obligatorias una a una, asegurando coherencia tÃ©cnica con el resto del sitio.\n\n" +
  "PROTOCOLO DE EJECUCIÃ“N:\n" +
  "1. ANÃLISIS NORMATIVO: Basado en el [PAÃS], lista quÃ© pÃ¡ginas son estrictamente obligatorias (ej: EspaÃ±a -> Aviso Legal, Privacidad, Cookies, Condiciones).\n" +
  "2. DESARROLLO ITERATIVO:\n" +
  "   - No generes todo el cÃ³digo de golpe.\n" +
  "   - Genera el cÃ³digo HTML completo para la PRIMERA pÃ¡gina de la lista.\n" +
  "   - Detente y pregunta: \"Â¿Validas los datos y el diseÃ±o? Â¿Pasamos a la siguiente?\".\n\n" +
  "REQUISITOS TÃ‰CNICOS (ESTRICTO):\n" +
  "- Estructura: HTML5 vÃ¡lido + Tailwind CSS (CDN).\n" +
  "- DiseÃ±o: Usa el mismo esquema de colores y tipografÃ­a que el resto de la web.\n" +
  "- Header/Footer: Deben ser idÃ©nticos visualmente a la Home (usa la misma estructura de navegaciÃ³n).\n" +
  "- Contenido: RedacciÃ³n legal formal, adaptada a la normativa del paÃ­s, insertando los [DATOS_CONTACTO] dinÃ¡micamente.\n\n" +
  "--- INSTRUCCIÃ“N INICIAL ---\n" +
  "Analiza el paÃ­s [PAÃS].\n" +
  "Lista las pÃ¡ginas requeridas.\n" +
  "Genera INMEDIATAMENTE el cÃ³digo de la primera pÃ¡gina (usualmente PolÃ­tica de Privacidad).\n" +
  "Detente.";

  add(c,mkSectionTitle('ğŸ“„ Prompt: Legal Compliance System'),mkPromptBlock(
    'PROMPT 4 â€” Generador de Arquitectura Legal',
    'Personaliza: [PAÃS], [NOMBRE_WEB], [DATOS_CONTACTO]',
    'P4',
    p4Text
  ));

  add(c,mkInfoBox('rgba(239,68,68,.08)','rgba(239,68,68,.25)','<p style="color:#ef4444;font-size:13px;margin:0">âš ï¸ <strong>IMPORTANTE:</strong> La IA genera plantillas legales estÃ¡ndar basadas en tu paÃ­s. Aunque son un excelente punto de partida, siempre revisa los textos finales con un especialista local antes de publicar.</p>'));
  
  add(c,mkInfoBox('rgba(59,130,246,.08)','rgba(59,130,246,.25)','<p style="color:#3b82f6;font-size:13px;margin:0">ğŸ’¡ <strong>Tip:</strong> AsegÃºrate de que los enlaces del Footer (creados en Fase 3) coincidan con los nombres de archivo que guardes aquÃ­ (ej: <code>privacy.html</code>, <code>cookies.html</code>).</p>'));
}
function phaseContent5(c){
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Generar los archivos tÃ©cnicos esenciales <strong style="color:#f59e0b">robots.txt</strong> y <strong style="color:#f59e0b">sitemap.xml</strong> para garantizar que Google pueda rastrear e indexar tu web correctamente.'));

  add(c,mkSectionTitle('ğŸ“ Pasos a seguir'),mkStepList([
    'Recopila los nombres de TODOS tus archivos .html creados (Home, legales, blog, calculadoras).',
    'Define tu dominio final (ej: https://tudominio.com).',
    'Ejecuta el prompt para obtener el cÃ³digo exacto.',
    'Guarda los archivos en la raÃ­z de tu carpeta de proyecto.'
  ]));

  var p5Text = "=== GENERADOR DE ECOSISTEMA TÃ‰CNICO SEO ===\n\n" +
  "INPUTS:\n" +
  "Dominio Base: [DOMINIO_RAIZ] (ej: https://miweb.com - SIN barra al final)\n" +
  "Inventario de Archivos: [LISTA_DE_ARCHIVOS] (Lista todos los .html: index.html, contacto.html, privacy.html...)\n\n" +
  "ROL:\n" +
  "Eres un Senior Technical SEO Specialist. Tu misiÃ³n es maximizar la \"Crawlability\" (rastreabilidad) del sitio generando archivos de configuraciÃ³n con sintaxis XML/TXT perfecta.\n\n" +
  "PROTOCOLO DE EJECUCIÃ“N:\n" +
  "1. PROCESAMIENTO DE URLs:\n" +
  "   - Convierte cada archivo en su URL Absoluta (Dominio + Archivo).\n" +
  "   - EXCEPCIÃ“N CRÃTICA: Si el archivo es 'index.html', la URL pÃºblica debe ser la raÃ­z (/).\n" +
  "   - Asegura formato de fecha W3C (YYYY-MM-DD) para hoy.\n\n" +
  "2. GENERACIÃ“N DE ARCHIVOS:\n" +
  "   A) ROBOTS.TXT:\n" +
  "      - User-agent universal (*).\n" +
  "      - Allow: / (Permitir todo).\n" +
  "      - Sitemap: [Inserta la URL absoluta del sitemap].\n" +
  "   B) SITEMAP.XML:\n" +
  "      - Cabecera XML estÃ¡ndar UTF-8.\n" +
  "      - Itera sobre la lista de archivos.\n" +
  "      - <loc>: URL Absoluta.\n" +
  "      - <lastmod>: Fecha actual.\n" +
  "      - <changefreq>: 'monthly' para legales/estÃ¡ticas, 'weekly' para blog/calculadoras.\n" +
  "      - <priority>: 1.0 para la Home, 0.8 para contenido core, 0.5 para legales.\n\n" +
  "OUTPUT:\n" +
  "EntrÃ©game dos bloques de cÃ³digo CLARAMENTE SEPARADOS (uno para robots.txt y otro para sitemap.xml) listos para guardar.";

  add(c,mkSectionTitle('ğŸ“„ Prompt: Technical SEO Architect'),mkPromptBlock(
    'PROMPT 5 â€” Generador de Robots & Sitemap',
    'Personaliza: [DOMINIO_RAIZ] y [LISTA_DE_ARCHIVOS]',
    'P5',
    p5Text
  ));

  add(c,mkInfoBox('rgba(245,158,11,.08)','rgba(245,158,11,.25)','<p style="color:#fbbf24;font-size:13px;margin:0">âš ï¸ <strong>IMPORTANTE:</strong> El archivo <code>sitemap.xml</code> es el mapa que le das a Google. Sin Ã©l, es posible que el buscador tarde semanas en encontrar tus pÃ¡ginas internas.</p>'));
}
function phaseContent6(c){
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Publicar tu web en internet. Usaremos <strong style="color:#f59e0b">GitHub</strong> (repositorio), <strong style="color:#f59e0b">Vercel</strong> (hosting gratuito y rÃ¡pido) y <strong style="color:#f59e0b">Cloudflare</strong> (dominio profesional).'));

  add(c,mkSectionTitle('ğŸ“ Flujo de Lanzamiento'),mkStepList([
    'PREPARACIÃ“N: Renombra tu archivo principal a <code style="color:#f59e0b">index.html</code>. El resto deben ser <code style="color:#f59e0b">[nombre].html</code>.',
    'GITHUB: Crea una cuenta y un "New Repository". Sube todos tus archivos (Upload files).',
    'VERCEL: Conecta tu cuenta de GitHub. Importa el repositorio y haz clic en "Deploy".',
    'DOMINIO: Si la web funciona bien, compra tu dominio en Cloudflare.',
    'DNS: En Vercel > Settings > Domains, aÃ±ade tu dominio. Configura los registros DNS en Cloudflare segÃºn te pida Vercel.'
  ]));

  add(c,mkSectionTitle('ğŸ“„ Prompt: Asistente de Despliegue (Opcional)'),mkPromptBlock(
    'PROMPT 6 â€” Experto en Hosting & DNS',
    'Ãšsalo solo si tienes errores al subir la web o configurar el dominio.',
    '=== ASISTENTE DE DEVOPS & DNS ===\n\nCONTEXTO:\nTengo una web estÃ¡tica (HTML/CSS).\nHosting: Vercel (conectado vÃ­a GitHub).\nDominio: Comprado en Cloudflare.\n\nPROBLEMA ACTUAL:\n[DESCRIBE TU ERROR: Ej. "Mi web se ve bien en local pero en Vercel no cargan los estilos" o "No sÃ© quÃ© registros DNS poner en Cloudflare"].\n\nSOLICITUD:\nDame una guÃ­a paso a paso para solucionar este error especÃ­fico y verificar que mi web estÃ© online.'
  ));

  add(c,mkInfoBox('rgba(59,130,246,.08)','rgba(59,130,246,.25)','<p style="color:#3b82f6;font-size:13px;margin:0">ğŸ’¡ <strong>Tip Pro:</strong> Vercel actualiza tu web automÃ¡ticamente. Cada vez que cambies algo en tu cÃ³digo y lo subas a GitHub, tu web se actualizarÃ¡ sola en segundos.</p>'));
  
  add(c,mkInfoBox('rgba(239,68,68,.08)','rgba(239,68,68,.25)','<p style="color:#ef4444;font-size:13px;margin:0">âš ï¸ <strong>CRÃTICO:</strong> AsegÃºrate de que todos tus enlaces internos en el cÃ³digo apunten a <code>pagina.html</code> y no solo a <code>pagina</code>, o Vercel podrÃ­a dar error 404.</p>'));
}
function phaseContent7(c){
  var cats=[
    {t:"Despliegue & Dominio",i:["La web carga en el dominio final (HTTPS)","No hay error de certificado SSL","Vercel muestra 'Ready' en el dashboard","La versiÃ³n mÃ³vil carga correctamente","Favicon visible en la pestaÃ±a"]},
    {t:"SEO TÃ©cnico",i:["El archivo /robots.txt es accesible","El archivo /sitemap.xml es accesible","Las URLs terminan en .html (o clean urls configuradas)","Meta Title y Description Ãºnicos por pÃ¡gina","Una etiqueta H1 Ãºnica por pÃ¡gina"]},
    {t:"Contenido & UX",i:["MenÃº de navegaciÃ³n funciona","Footer aparece en todas las URLs","Enlaces internos correctos (no 404)","Botones de llamada a la acciÃ³n (CTA) visibles","Formularios (si hay) funcionan"]},
    {t:"Legal",i:["PÃ¡gina de Privacidad accesible","PÃ¡gina de Aviso Legal accesible","Banner de Cookies (si aplica) funciona","Datos de contacto visibles"]}
  ];

  var total=0;cats.forEach(function(cat){total+=cat.i.length});
  
  // LÃ³gica de la barra de progreso (mantenida igual)
  function countDone(){var n=0;for(var k in qaChecks)if(qaChecks[k])n++;return n}
  
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Auditar la web en <strong style="color:#22c55e">ProducciÃ³n</strong> y forzar la <strong style="color:#f59e0b">indexaciÃ³n en Google</strong>.'));
  add(c,mkSectionTitle('âœ… Checklist de QA (Post-Launch)'));

  // Barra de progreso visual
  var barOuter=el('div',{css:{height:'8px',background:'rgba(255,255,255,.05)',borderRadius:'4px',marginBottom:'6px'}});
  var barInner=el('div',{css:{height:'100%',borderRadius:'4px',transition:'width .4s'}});
  barOuter.appendChild(barInner);
  var barText=el('p',{cls:'mono',css:{color:'#64748b',fontSize:'12px',marginTop:'6px',marginBottom:'20px'}});
  
  function updateBar(){
    var d=countDone(),pct=Math.round((d/total)*100);
    barInner.style.width=pct+'%';
    barInner.style.background=pct===100?'#22c55e':'linear-gradient(90deg,#f59e0b,#ef4444)';
    barText.textContent=d+'/'+total+' â€” '+pct+'% completado';
    barText.style.color=pct===100?'#22c55e':'#64748b';
  }
  updateBar();
  add(c,barOuter,barText);

  // GeneraciÃ³n de categorÃ­as de checklist
  cats.forEach(function(cat,ci){
    add(c,el('h4',{html:cat.t,css:{color:'#cbd5e1',fontSize:'14px',marginBottom:'6px',marginTop:'16px'}}));
    cat.i.forEach(function(item,ii){
      var key=ci+'-'+ii+'-p7'; // Clave Ãºnica actualizada para fase 7
      var checked=!!qaChecks[key];
      var label=el('div',{cls:'check-item',css:{color:checked?'#22c55e':'#94a3b8',cursor:'pointer'}});
      var box=el('span',{cls:'check-box',text:checked?'âœ“':'',css:{border:checked?'2px solid #22c55e':'2px solid rgba(255,255,255,.18)',background:checked?'rgba(34,197,94,.12)':'transparent',color:'#22c55e'}});
      var txt=el('span',{text:item,css:{textDecoration:checked?'line-through':'none',opacity:checked?'.55':'1'}});
      
      label.addEventListener('click',function(){
        qaChecks[key]=!qaChecks[key];save();
        var ch=qaChecks[key];
        box.textContent=ch?'âœ“':'';box.style.border=ch?'2px solid #22c55e':'2px solid rgba(255,255,255,.18)';box.style.background=ch?'rgba(34,197,94,.12)':'transparent';
        txt.style.textDecoration=ch?'line-through':'none';txt.style.opacity=ch?'.55':'1';
        label.style.color=ch?'#22c55e':'#94a3b8';
        updateBar();
      });
      add(label,box,txt);c.appendChild(label);
    });
  });

  add(c,mkSectionTitle('ğŸ“‹ Estructura Final en GitHub/Vercel'));
  var pre=el('pre',{cls:'code',css:{background:'rgba(0,0,0,.4)',border:'1px solid rgba(255,255,255,.05)',borderRadius:'10px',padding:'18px',color:'#94a3b8',fontSize:'13px',lineHeight:'1.8',overflowX:'auto'}});
  // Estructura aplanada acorde a la Fase 6
  pre.textContent="/raiz-del-repo/\nâ”œâ”€â”€ index.html            (Home)\nâ”œâ”€â”€ contacto.html\nâ”œâ”€â”€ [articulo-seo].html\nâ”œâ”€â”€ [calculadora].html\nâ”œâ”€â”€ privacy.html\nâ”œâ”€â”€ terms.html\nâ”œâ”€â”€ robots.txt\nâ”œâ”€â”€ sitemap.xml\nâ””â”€â”€ assets/               (ImÃ¡genes y CSS)";
  add(c,pre);

  add(c,mkSectionTitle('ğŸš€ IndexaciÃ³n (Google Search Console)'),mkStepList([
    'Ve a search.google.com/search-console',
    'AÃ±ade propiedad â†’ Dominio (ej: tusitio.com)',
    'Verifica mediante DNS (copia el TXT a Cloudflare)',
    'MenÃº "Sitemaps" â†’ Escribe "sitemap.xml" â†’ Enviar',
    'MenÃº "InspecciÃ³n de URL" â†’ Pega tu dominio â†’ "Solicitar indexaciÃ³n"'
  ]));
  
  add(c,mkInfoBox('rgba(59,130,246,.08)','rgba(59,130,246,.25)','<p style="color:#3b82f6;font-size:13px;margin:0">ğŸ‰ <strong>Â¡Felicidades!</strong> Si has llegado hasta aquÃ­, tienes una web 100% funcional, legal, alojada gratis en Vercel y optimizada para SEO.</p>'));
}
function phaseContent8(c){
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Oficializar tu web ante Google: Verificar la propiedad del dominio, enviar el mapa del sitio y <strong style="color:#f59e0b">solicitar la indexaciÃ³n</strong> para aparecer en bÃºsquedas.'));

  add(c,mkSectionTitle('1ï¸âƒ£ VerificaciÃ³n de Propiedad (DNS)'),mkStepList([
    'Accede a <a href="https://search.google.com/search-console" target="_blank" style="color:#60a5fa;text-decoration:underline">Google Search Console</a> e inicia sesiÃ³n.',
    'Selecciona el tipo de propiedad: <strong>Dominio</strong> (la opciÃ³n de la izquierda).',
    'Introduce tu dominio sin https ni www (ej: <code>tusitio.com</code>).',
    'Copia el registro <strong>TXT</strong> que te proporciona Google.',
    'Ve a <strong>Cloudflare</strong> > Selecciona tu dominio > DNS > <strong>Add record</strong>.',
    'Type: <strong>TXT</strong> | Name: <strong>@</strong> | Content: <strong>[Pega el cÃ³digo de Google]</strong>.',
    'Guarda en Cloudflare, espera 1 minuto y pulsa <strong>VERIFICAR</strong> en Search Console.'
  ]));

  add(c,mkSectionTitle('2ï¸âƒ£ Enviar Sitemap'),mkStepList([
    'En el panel de Search Console, ve al menÃº lateral: <strong>Sitemaps</strong>.',
    'En la casilla "AÃ±adir un sitemap nuevo", escribe: <code style="color:#f59e0b">sitemap.xml</code>',
    'Pulsa <strong>ENVIAR</strong>.',
    'Verifica que en la columna "Estado" aparezca <span style="color:#22c55e">Correcto</span>. (Si da error, espera 10 min y reintenta).'
  ]));

  add(c,mkSectionTitle('3ï¸âƒ£ Solicitar IndexaciÃ³n Manual'),mkStepList([
    'En la barra de bÃºsqueda superior de Search Console, pega tu URL exacta: <code style="color:#cbd5e1">https://tusitio.com/</code>',
    'Pulsa Enter. Google te dirÃ¡ "La URL no estÃ¡ en Google".',
    'Haz clic en el botÃ³n gris: <strong>SOLICITAR INDEXACIÃ“N</strong>.',
    'Espera (puede tardar 1-2 minutos).',
    'Repite el proceso con tus URLs mÃ¡s importantes si lo deseas.'
  ]));

  add(c,mkInfoBox('rgba(34,197,94,.08)','rgba(34,197,94,.25)','<p style="color:#22c55e;font-size:14px;font-weight:700;margin:0">ğŸ‰ Â¡CICLO COMPLETO!</p><p style="color:#94a3b8;font-size:13px;margin-top:8px;line-height:1.6">Has pasado de una idea a una web publicada, legal y enviada a Google. Los primeros resultados suelen aparecer en 24-48 horas.</p>'));
}  

var phaseRenderers=[phaseContent1,phaseContent2,phaseContent3,phaseContent4,phaseContent5,phaseContent6,phaseContent7];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SHOW PHASE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showPhase(id){
  var phase=PHASES.find(function(p){return p.id===id});
  var done=completed.indexOf(id)!==-1;
  var next=PHASES.find(function(p){return p.id===id+1});
  var app=document.getElementById('app');
  app.innerHTML='';

  // Nav
  var nav=el('div',{cls:'nav-bar'});
  var backBtn=el('button',{cls:'back-btn',text:'â† Volver al mapa',onclick:renderMap});
  var xpArea=el('div',{css:{display:'flex',alignItems:'center',gap:'12px'},html:'<span class="mono" style="color:#f59e0b;font-size:12px;font-weight:700">'+getXP()+' XP</span><div style="width:80px;height:6px;background:rgba(255,255,255,.06);border-radius:3px;overflow:hidden"><div style="height:100%;width:'+getPct()+'%;background:linear-gradient(90deg,#f59e0b,#ef4444);border-radius:3px"></div></div>'});
  add(nav,backBtn,xpArea);app.appendChild(nav);

  // Header
  var hdr=el('div',{css:{padding:'48px 20px 0',maxWidth:'780px',margin:'0 auto'}});
  hdr.innerHTML='<div style="display:flex;align-items:center;gap:14px;margin-bottom:8px"><span style="font-size:36px">'+phase.icon+'</span><div><div class="mono" style="color:#64748b;font-size:12px;font-weight:700;letter-spacing:2px">FASE '+phase.id+' DE '+PHASES.length+'</div><h1 style="font-size:clamp(22px,4vw,30px);font-weight:800;color:#f1f5f9;line-height:1.2;margin-top:4px">'+phase.title+'</h1></div></div><p style="color:#64748b;font-size:15px;margin-bottom:12px">'+phase.subtitle+'</p><div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:32px"><span class="mono" style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:8px;padding:5px 14px;font-size:12px;color:#64748b">â± '+phase.time+'</span><span class="mono" style="background:'+(done?'rgba(34,197,94,.1)':'rgba(245,158,11,.1)')+';border:1px solid '+(done?'rgba(34,197,94,.2)':'rgba(245,158,11,.2)')+';border-radius:8px;padding:5px 14px;font-size:12px;color:'+(done?'#4ade80':'#f59e0b')+';font-weight:700">'+(done?'âœ“ COMPLETADA':'+'+phase.xp+' XP')+'</span><span class="mono" style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:8px;padding:5px 14px;font-size:12px;color:#64748b">ğŸ¯ '+phase.output+'</span></div>';
  app.appendChild(hdr);

  // Body
  var body=el('div',{css:{maxWidth:'780px',margin:'0 auto',padding:'0 20px 60px',animation:'fadeIn .4s'}});
  phaseRenderers[phase.id-1](body);

  // Buttons
  var btns=el('div',{css:{marginTop:'40px'}});
  if(!done){
    var cb=el('button',{cls:'complete-btn mono',css:{background:'linear-gradient(135deg,#f59e0b,#d97706)',color:'#000'},text:'âœ… COMPLETAR FASE '+phase.id+' â€” RECLAMAR +'+phase.xp+' XP',onclick:function(){
      if(completed.indexOf(id)===-1){completed.push(id);save();showBadge(phase)}
      showPhase(id);
    }});
    btns.appendChild(cb);
  }
  if(done&&next){
    btns.appendChild(el('button',{cls:'complete-btn mono',css:{background:'linear-gradient(135deg,#22c55e,#16a34a)',color:'#fff'},text:'â†’ AVANZAR A FASE '+next.id+': '+next.title,onclick:function(){showPhase(next.id)}}));
  }
  if(done&&!next){
    btns.appendChild(el('button',{cls:'complete-btn mono',css:{background:'linear-gradient(135deg,#22c55e,#16a34a)',color:'#fff'},text:'ğŸ† VER RESUMEN FINAL',onclick:renderMap}));
  }
  body.appendChild(btns);
  app.appendChild(body);
  window.scrollTo({top:0,behavior:'smooth'});
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• RENDER MAP â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderMap(){
  var app=document.getElementById('app');
  app.innerHTML='';
  var allDone=completed.length===PHASES.length;
  var xp=getXP(),pct=getPct(),lv=getLevel();

  // Hero (static HTML, no event listeners needed)
  var hero=el('div',{cls:'hero'});
  hero.innerHTML='<div class="hero-grid"></div><div class="hero-inner"><div class="hero-tag mono">PROFESSIONAL v2</div><h1 class="hero-title">Nichos SEO de Calculadoras</h1><p style="font-size:clamp(15px,2.5vw,18px);color:#64748b;margin-bottom:36px;line-height:1.6">De <strong style="color:#f59e0b">IDEA</strong> a <strong style="color:#22c55e">SITIO PUBLICADO</strong> en 2.5-3 Horas</p><div style="max-width:420px;margin:0 auto"><div style="display:flex;justify-content:space-between;align-items:baseline;margin-bottom:8px"><span class="mono" style="color:#f59e0b;font-weight:700;font-size:14px;'+(completed.length>0?'animation:glow 2s infinite':'')+'">LVL: '+lv+'</span><span class="mono" style="color:#64748b;font-size:13px">'+xp+'/'+TXP+' XP</span></div><div style="height:10px;background:rgba(255,255,255,.04);border-radius:5px;border:1px solid rgba(255,255,255,.06);overflow:hidden"><div style="height:100%;width:'+pct+'%;border-radius:5px;transition:width .8s cubic-bezier(.22,1,.36,1);'+(pct===100?'background:linear-gradient(90deg,#22c55e,#16a34a)':'background:linear-gradient(90deg,#f59e0b,#ef4444,#ec4899);box-shadow:0 0 12px rgba(245,158,11,.3)')+'"></div></div><div class="mono" style="display:flex;justify-content:space-between;margin-top:6px;font-size:11px;color:#475569"><span>'+completed.length+'/'+PHASES.length+' fases</span><span>'+pct+'%</span></div></div>'+(completed.length>0?'<div style="margin-top:20px;display:flex;justify-content:center;gap:8px;flex-wrap:wrap">'+completed.map(function(id){var p=PHASES.find(function(x){return x.id===id});return '<div class="mono" style="background:rgba(245,158,11,.1);border:1px solid rgba(245,158,11,.2);border-radius:8px;padding:4px 12px;font-size:11px;color:#f59e0b;font-weight:700">'+p.bi+' '+p.badge+'</div>'}).join('')+'</div>':'')+'</div>';
  app.appendChild(hero);

  // Phase list â€” using DOM methods to preserve onclick
  var wrap=el('div',{css:{maxWidth:'680px',margin:'0 auto',padding:'40px 20px 80px'}});

  PHASES.forEach(function(phase,idx){
    var done=completed.indexOf(phase.id)!==-1;
    var unlocked=phase.id===1||completed.indexOf(phase.id-1)!==-1;
    var isNext=!done&&unlocked;
    if(!done&&!isNext)return;

    var row=el('div',{css:{position:'relative',paddingLeft:'52px',marginBottom:'16px'}});
    if(idx<PHASES.length-1&&done){
      row.appendChild(el('div',{css:{position:'absolute',left:'21px',top:'48px',bottom:'-16px',width:'2px',background:'rgba(34,197,94,.25)'}}));
    }
    var dot=el('div',{cls:'mono',css:{position:'absolute',left:'8px',top:'16px',width:'28px',height:'28px',borderRadius:'50%',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'13px',fontWeight:'800',background:done?'#22c55e':'#f59e0b',color:done?'#fff':'#000',animation:isNext?'pulse 2s infinite':'none'},text:done?'âœ“':String(phase.id)});
    row.appendChild(dot);

    var card=el('div',{cls:'phase-card',css:{background:isNext?'linear-gradient(135deg,rgba(245,158,11,.08),rgba(245,158,11,.02))':'rgba(34,197,94,.03)',border:isNext?'1px solid rgba(245,158,11,.25)':'1px solid rgba(34,197,94,.12)'}});
    card.innerHTML='<div style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px"><div style="display:flex;align-items:center;gap:12px"><span style="font-size:24px">'+phase.icon+'</span><div><div style="font-size:16px;font-weight:700;color:'+(done?'#4ade80':'#e2e8f0')+'">Fase '+phase.id+': '+phase.title+'</div><div style="font-size:12px;color:#64748b;margin-top:2px">'+phase.subtitle+'</div></div></div><div style="display:flex;align-items:center;gap:8px"><span class="mono" style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:6px;padding:4px 12px;font-size:11px;color:#64748b">â± '+phase.time+'</span><span class="mono" style="background:'+(done?'rgba(34,197,94,.1)':'rgba(245,158,11,.1)')+';border:1px solid '+(done?'rgba(34,197,94,.2)':'rgba(245,158,11,.2)')+';border-radius:6px;padding:4px 12px;font-size:11px;color:'+(done?'#4ade80':'#f59e0b')+';font-weight:700">'+(done?'âœ“ DONE':'+'+phase.xp+' XP')+'</span><span style="color:#475569;font-size:16px;margin-left:4px">â†’</span></div></div>';
    card.addEventListener('click',(function(pid){return function(){showPhase(pid)}})(phase.id));
    row.appendChild(card);
    wrap.appendChild(row);
  });

  // Summary or final â€” also using DOM methods
  if(allDone){
    var fin=el('div',{css:{marginTop:'48px',padding:'44px 32px',background:'linear-gradient(145deg,rgba(34,197,94,.06),rgba(245,158,11,.04))',border:'2px solid rgba(34,197,94,.2)',borderRadius:'24px',textAlign:'center',animation:'fadeIn .6s'}});
    fin.innerHTML='<div style="font-size:60px;margin-bottom:16px">ğŸ†</div><h2 class="mono" style="font-size:28px;font-weight:800;margin-bottom:8px;background:linear-gradient(135deg,#22c55e,#f59e0b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text">Â¡MISIÃ“N COMPLETA!</h2><p style="color:#94a3b8;font-size:15px;margin-bottom:32px">Las 7 fases completadas. Tu sitio estÃ¡ listo.</p><div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-bottom:32px">'+["InvestigaciÃ³n","100+ Keywords","URLs creadas","SEO perfecto","Legal completo","Publicado"].map(function(l){return '<div style="background:rgba(34,197,94,.06);border:1px solid rgba(34,197,94,.12);border-radius:10px;padding:12px;font-size:12px;color:#4ade80;font-weight:600">âœ… '+l+'</div>'}).join('')+'</div><h3 class="mono" style="color:#e2e8f0;font-size:16px;margin-bottom:14px">ğŸ“ˆ PrÃ³ximos Pasos</h3><div style="text-align:left;max-width:420px;margin:0 auto;color:#94a3b8;font-size:13px;line-height:2.4"><div><strong style="color:#f59e0b">Semana 1:</strong> Monitorea Google Analytics</div><div><strong style="color:#f59e0b">Semana 2-4:</strong> Crea 2-3 backlinks</div><div><strong style="color:#f59e0b">Mes 1-2:</strong> Primeros visitantes</div><div><strong style="color:#f59e0b">Mes 3:</strong> Primeros ingresos</div><div><strong style="color:#f59e0b">Mes 6+:</strong> Ingresos pasivos recurrentes</div></div><div style="margin-top:28px;padding:20px;background:rgba(245,158,11,.06);border:1px solid rgba(245,158,11,.15);border-radius:14px"><h4 class="mono" style="color:#f59e0b;font-size:14px;margin-bottom:12px">ğŸ“Š EstimaciÃ³n de Ingresos</h4><div style="color:#94a3b8;font-size:13px;line-height:2">Mes 1-2: <strong style="color:#e2e8f0">50-300 visitantes</strong><br>Mes 3: <strong style="color:#e2e8f0">500-2,000</strong><br>Mes 6: <strong style="color:#e2e8f0">2,000-10,000+/mes</strong><br>Ingresos: <strong style="color:#22c55e">EUR 300-5,000+/mes</strong></div></div><p style="color:#64748b;font-size:14px;margin-top:28px;font-style:italic">Tu viaje empieza ahora. ğŸš€</p>';
    var resetBtn=el('button',{css:{marginTop:'20px',background:'rgba(255,255,255,.06)',border:'1px solid rgba(255,255,255,.1)',color:'#64748b',padding:'10px 24px',borderRadius:'10px',cursor:'pointer',fontSize:'12px',fontFamily:'inherit'},text:'â†º Reiniciar progreso',onclick:function(){completed=[];qaChecks={};save();renderMap()}});
    fin.appendChild(resetBtn);
    wrap.appendChild(fin);
  } else {
    var summary=el('div',{css:{marginTop:'40px',background:'rgba(255,255,255,.02)',border:'1px solid rgba(255,255,255,.06)',borderRadius:'14px',padding:'24px'}});
    summary.innerHTML='<h3 class="mono" style="color:#94a3b8;font-size:14px;margin-bottom:16px">ğŸ“Š Timeline Estimado</h3><div style="display:grid;grid-template-columns:1fr auto;gap:8px 20px;font-size:13px"><span style="color:#64748b">MÃ­nimo (5 URLs)</span><span class="mono" style="color:#e2e8f0">2-2.5 horas</span><span style="color:#64748b">EstÃ¡ndar (10 URLs)</span><span class="mono" style="color:#e2e8f0">2.5-3.5 horas</span><span style="color:#64748b">Extenso (20+ URLs)</span><span class="mono" style="color:#e2e8f0">4+ horas</span></div>';
    wrap.appendChild(summary);
  }

  app.appendChild(wrap);
  window.scrollTo({top:0,behavior:'smooth'});
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• INIT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
renderMap();
</script>
</body>
</html>
