<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SOP SEO Calculadoras â€” Gamificado</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;9..40,600;9..40,700;9..40,800&family=Space+Mono:wght@400;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{background:#080c14;color:#e2e8f0;font-family:'DM Sans','Segoe UI',system-ui,sans-serif;min-height:100vh;overflow-x:hidden}
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:rgba(255,255,255,.03)}
::-webkit-scrollbar-thumb{background:rgba(255,255,255,.1);border-radius:3px}
@keyframes fadeIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
@keyframes popIn{from{transform:scale(.7);opacity:0}to{transform:scale(1);opacity:1}}
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(245,158,11,.35)}50%{box-shadow:0 0 0 10px rgba(245,158,11,0)}}
@keyframes glow{0%,100%{text-shadow:0 0 20px rgba(245,158,11,.3)}50%{text-shadow:0 0 40px rgba(245,158,11,.6)}}
.mono{font-family:'Space Mono',monospace}
.code{font-family:'JetBrains Mono','Fira Code',monospace}
.hidden{display:none!important}
.badge-overlay{position:fixed;inset:0;z-index:9999;background:rgba(0,0,0,.75);backdrop-filter:blur(10px);display:flex;align-items:center;justify-content:center;animation:fadeIn .3s}
.badge-card{background:linear-gradient(145deg,#1e293b,#0f172a);border:2px solid #f59e0b;border-radius:28px;padding:52px 48px;text-align:center;box-shadow:0 0 100px rgba(245,158,11,.2);animation:popIn .4s cubic-bezier(.175,.885,.32,1.275);max-width:400px;width:90%}
.prompt-block{background:rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.07);border-radius:14px;margin-bottom:20px;overflow:hidden}
.prompt-toggle{width:100%;background:none;border:none;color:#e2e8f0;padding:18px 22px;display:flex;align-items:center;justify-content:space-between;cursor:pointer;font-family:inherit;font-size:15px;font-weight:700;text-align:left}
.prompt-toggle:hover{background:rgba(255,255,255,.02)}
.prompt-arrow{transition:transform .3s;font-size:11px;opacity:.4}
.prompt-arrow.open{transform:rotate(180deg)}
.prompt-body{padding:0 22px 22px}
.prompt-pre{background:rgba(0,0,0,.5);border:1px solid rgba(255,255,255,.05);border-radius:10px;padding:18px;color:#cbd5e1;font-size:12.5px;line-height:1.7;overflow-x:auto;white-space:pre-wrap;word-break:break-word;max-height:520px;overflow-y:auto;font-family:'JetBrains Mono','Fira Code',monospace}
.copy-btn{background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.12);color:#94a3b8;padding:6px 16px;border-radius:8px;font-size:12px;cursor:pointer;transition:all .25s;font-family:inherit;font-weight:600}
.copy-btn.copied{background:#22c55e;color:#fff;border-color:#22c55e}
.info-box{border-radius:12px;padding:18px;margin-top:16px}
.section-title{color:#e2e8f0;font-size:16px;font-weight:700;margin-top:32px;margin-bottom:14px;font-family:'Space Mono',monospace;border-bottom:1px solid rgba(255,255,255,.06);padding-bottom:10px}
.step-list{color:#cbd5e1;font-size:14px;line-height:2.2;padding-left:22px;margin:0}
.check-item{display:flex;align-items:flex-start;gap:10px;padding:7px 0;cursor:pointer;font-size:14px;line-height:1.5;transition:color .2s}
.check-box{width:22px;height:22px;min-width:22px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:12px;transition:all .2s;margin-top:1px}
.phase-card{border-radius:16px;padding:20px 24px;cursor:pointer;transition:all .2s}
.phase-card:hover{transform:translateX(4px)}
.complete-btn{width:100%;padding:18px 24px;border:none;border-radius:14px;font-size:16px;font-weight:800;cursor:pointer;font-family:'Space Mono',monospace;letter-spacing:1px;transition:transform .15s;margin-top:12px}
.complete-btn:active{transform:scale(.97)}
.nav-bar{background:rgba(0,0,0,.5);border-bottom:1px solid rgba(255,255,255,.06);padding:12px 20px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100;backdrop-filter:blur(16px)}
.back-btn{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);color:#94a3b8;padding:8px 18px;border-radius:8px;cursor:pointer;font-size:13px;font-family:inherit;font-weight:600;transition:all .2s}
.back-btn:hover{background:rgba(255,255,255,.1);color:#e2e8f0}
.sub-tab{padding:12px 22px;border-radius:10px;cursor:pointer;font-size:14px;font-weight:700;font-family:inherit;transition:all .2s;border:none;color:#fff}
.hero{background:linear-gradient(170deg,#0c1220,#0a0f1a 40%,#111827);border-bottom:1px solid rgba(255,255,255,.04);padding:56px 20px 52px;text-align:center;position:relative;overflow:hidden}
.hero-grid{position:absolute;inset:0;opacity:.04;background-image:linear-gradient(rgba(255,255,255,.1) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,.1) 1px,transparent 1px);background-size:48px 48px}
.hero-inner{position:relative;max-width:700px;margin:0 auto}
.hero-tag{display:inline-block;background:rgba(245,158,11,.1);border:1px solid rgba(245,158,11,.25);border-radius:8px;padding:6px 16px;font-size:12px;font-weight:700;color:#f59e0b;letter-spacing:2px;margin-bottom:20px}
.hero-title{font-size:clamp(28px,5vw,44px);font-weight:800;line-height:1.15;margin-bottom:16px;background:linear-gradient(135deg,#f1f5f9,#94a3b8);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
</style>
</head>
<body>

<div id="badge-popup" class="badge-overlay hidden" onclick="closeBadge()">
  <div class="badge-card" onclick="event.stopPropagation()">
    <div id="bp-icon" style="font-size:72px;margin-bottom:20px"></div>
    <div class="mono" style="color:#f59e0b;font-size:12px;font-weight:700;letter-spacing:5px;margin-bottom:8px">BADGE DESBLOQUEADO</div>
    <div id="bp-name" class="mono" style="color:#f1f5f9;font-size:30px;font-weight:800;margin-bottom:28px"></div>
    <button onclick="closeBadge()" style="background:linear-gradient(135deg,#f59e0b,#d97706);border:none;color:#000;font-weight:800;padding:14px 36px;border-radius:14px;cursor:pointer;font-size:15px;font-family:inherit">Â¡SIGUIENTE FASE!</button>
  </div>
</div>

<div id="app"></div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DATA â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
var PHASES=[
{id:1,icon:"ğŸ’¡",title:"Generar 100 Ideas de Nichos",subtitle:"Opciones infinitas. Elige la que TE APASIONE.",time:"8-10 min",xp:150,output:"Lista de 100 nichos viables",badge:"IDEATOR",bi:"ğŸ§ "},
{id:2,icon:"ğŸ”",title:"AnÃ¡lisis Competencia & Arquitectura",subtitle:"EspÃ­a a la competencia. Luego, supÃ©ralos.",time:"15-20 min",xp:250,output:"Lista de URLs con anÃ¡lisis",badge:"STRATEGIST",bi:"ğŸ¯"},
{id:3,icon:"ğŸ”‘",title:"Keyword Research Profundo",subtitle:"Encuentra las palabras clave que Google ADORA.",time:"12-15 min",xp:300,output:"Inputs organizados para cada URL",badge:"KEYWORD HUNTER",bi:"ğŸ¹"},
{id:4,icon:"âš™ï¸",title:"Crear URLs (Calc + Blog + Tools)",subtitle:"Cada pÃ¡gina = un archivo .html independiente",time:"5-10 min c/u",xp:500,output:"N URLs SEO optimizadas",badge:"BUILDER",bi:"ğŸ—ï¸"},
{id:5,icon:"âš–ï¸",title:"Crear PÃ¡ginas Legales",subtitle:"ProtecciÃ³n legal. Necesarias para operar.",time:"25-30 min",xp:200,output:"Privacidad, TÃ©rminos, Aviso Legal",badge:"COMPLIANT",bi:"ğŸ›¡ï¸"},
{id:6,icon:"ğŸ ",title:"PÃ¡gina Inicio + Header/Footer",subtitle:"Tu vitrina al mundo.",time:"15-17 min",xp:250,output:"index.html + header-footer.html",badge:"ARCHITECT",bi:"ğŸ›ï¸"},
{id:7,icon:"âœ…",title:"QA Final & PublicaciÃ³n",subtitle:"Ãšltimas revisiones. Luego: al mundo.",time:"10-15 min",xp:350,output:"Sitio completamente funcional",badge:"LAUNCHER",bi:"ğŸš€"}
];
var TXP=PHASES.reduce(function(s,p){return s+p.xp},0);

var completed=[];try{completed=JSON.parse(localStorage.getItem('sop_done')||'[]')}catch(e){}
var qaChecks={};try{qaChecks=JSON.parse(localStorage.getItem('sop_qa')||'{}')}catch(e){}

function save(){try{localStorage.setItem('sop_done',JSON.stringify(completed));localStorage.setItem('sop_qa',JSON.stringify(qaChecks))}catch(e){}}
function getXP(){var s=0;for(var i=0;i<completed.length;i++){var p=PHASES.find(function(x){return x.id===completed[i]});if(p)s+=p.xp}return s}
function getLevel(){var n=completed.length;return n===0?"NOVATO":n<=2?"APRENDIZ":n<=4?"PRO":n<=6?"EXPERTO":"MAESTRO SEO"}
function getPct(){return Math.round((getXP()/TXP)*100)}

function showBadge(p){document.getElementById('bp-icon').textContent=p.bi;document.getElementById('bp-name').textContent=p.badge;document.getElementById('badge-popup').classList.remove('hidden')}
function closeBadge(){document.getElementById('badge-popup').classList.add('hidden')}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PROMPTS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
var P={};
P.P1="=== GENERADOR DE 100 IDEAS DE NICHOS SEO RENTABLES ===\n\nCONTEXTO:\nSoy emprendedor digital que quiere crear sitios de calculadoras online para ganar dinero.\nObjetivo: Obtener 100 ideas de nichos REALES y VIABLES en [PAÃS-DESTINO].\n\nCRITERIOS DE FILTRO (ESTRICTOS):\n1. Volumen de bÃºsquedas: 600-10000/mes (debe tener demanda real)\n2. Competencia: BAJA-MEDIA (no dominado por Google o sitios gigantes)\n3. Potencial monetario: EUR 500-3000+/mes realista\n4. ValidaciÃ³n: Que EXISTA demanda real en [PAÃS-DESTINO]\n5. Calculadora viable: Que tenga sentido crear una herramienta interactiva\n\nINSTRUCCIONES DE ANÃLISIS:\nPara cada nicho, debes:\n- Pensar COMO PERSONA que vive en [PAÃS-DESTINO]\n- Entender necesidades reales y psicologÃ­a del mercado\n- Investigar micronichos no saturados\n- Considerar estacionalidad y tendencias\n- Pensar en PROBLEMAS reales que la gente resuelve con calculadoras\n\nDIVERSIDAD DE CATEGORÃAS:\nIncluye nichos de:\n- Finanzas (hipotecas, crÃ©ditos, impuestos, inversiones)\n- ConstrucciÃ³n & Hogar (presupuestos, materiales, reforma)\n- Salud & Fitness (calorÃ­as, IMC, edad biolÃ³gica, etc.)\n- EducaciÃ³n (becas, costos estudio, etc.)\n- EnergÃ­a (consumo elÃ©ctrico, solar, etc.)\n- Seguros (cÃ¡lculo de primas, etc.)\n- Viajes (presupuestos, conversiones)\n- Negocios (mÃ¡rgenes, ROI, payback, etc.)\n- Automotor (financiamiento, consumo combustible)\n- Y mÃ¡s...\n\nFORMATO DE RESPUESTA (OBLIGATORIO):\nDevuelve EXACTAMENTE 100 ideas en este formato CSV:\n\nRanking | Nicho | Palabra Clave Principal | Volumen/Mes Est. | Viabilidad | Por QuÃ© Funciona | Potencial Mensual EUR | CategorÃ­a\n\nEjemplo de filas:\n1 | Calculadora de Hipotecas | \"hypothekenrechner\" | 1800 | ALTA | Alemanes buscan financiamiento. Alto ticket. | 1500-2500 | Finanzas\n2 | Calculadora de Impuestos | \"steuerrechner\" | 2100 | ALTA | Anual. Millones lo buscan. Recurrente. | 1200-2000 | Impuestos\n\nREGLAS IMPORTANTES:\n- NO repitas nichos (cada uno Ãºnico)\n- Los volÃºmenes deben ser REALISTAS\n- Incluye nichos obvios Y nichos ocultos\n- Prioriza \"evergreen\"\n- Considera demanda REAL, no especulaciÃ³n\n\nAHORA GENERA LOS 100 NICHOS.\nResponde en formato CSV directo (sin preamble ni explicaciones).";

P.P2="=== ANÃLISIS COMPETIDOR & ARQUITECTURA DE URLs ===\n\nCONTEXTO:\nElegÃ­ el nicho: [NICHO-ELEGIDO]\nPalabra clave principal: [PALABRA-CLAVE-PRINCIPAL]\nPaÃ­s/Idioma: [PAÃS-IDIOMA]\n\nPARTE 1: ANÃLISIS DE COMPETENCIA\n\nNecesito que analices a los competidores TOP 10 de esta palabra clave:\n- Â¿CuÃ¡ntas URLs/pÃ¡ginas tienen cada sitio?\n- Â¿CuÃ¡l es la estructura de navegaciÃ³n?\n- Â¿Tienen calculadora, blog, o ambas?\n- Â¿QuÃ© palabras clave secundarias atacan?\n- Â¿CuÃ¡ntos artÃ­culos de blog?\n- Â¿Tienen \"tools\" o herramientas secundarias?\n\nRespuesta formato:\n**Competidor 1 (sitio):**\n- URLs totales: [nÃºmero]\n- Estructura: [descripciÃ³n]\n- Herramientas: [lista]\n- Palabras clave: [lista de 5 principales]\n- Estrategia: [resumen]\n[Repite para competidores 2-10]\n\nPARTE 2: ANÃLISIS DE GAPS\n- Â¿QuÃ© URLs crean los competidores?\n- Â¿QuÃ© Keywords NO atacan (oportunidades)?\n- Â¿QuÃ© long-tail desatendidas?\n- Â¿Hay demanda sin oferta?\n\nPARTE 3: ARQUITECTURA RECOMENDADA\n1. Â¿CuÃ¡ntas URLs MÃNIMO? JUSTIFICA.\n2. Para CADA URL: Nombre, URL amigable, KW objetivo, BÃºsquedas/mes, Tipo, JustificaciÃ³n, Dificultad SEO, Prioridad.\n3. Estructura en orden de importancia.\n\nPARTE 4: VENTAJA COMPETITIVA\nÂ¿CÃ³mo SUPERAR a la competencia? 3-5 acciones especÃ­ficas.\n\nFORMATO FINAL (TABLA):\n| Prioridad | Tipo | URL | Palabra Clave | Volumen | Dificultad | Por QuÃ© |\n\nRESPONDE TODAS LAS PARTES EN ORDEN.";

P.P3="=== KEYWORD RESEARCH PROFUNDO (100+ KEYWORDS) + INPUTS FASE 4 ===\n\nCONTEXTO:\nNicho: [NICHO]\nPalabra clave principal: [PALABRA-CLAVE-PRINCIPAL]\nIdioma: [IDIOMA]\nPaÃ­s: [PAÃS]\nURLs planeadas: [URLS-ARQUITECTURA]\n\nINSTRUCCIONES CRÃTICAS:\n1. GENERA 100+ palabras clave REALES.\n2. Cada keyword: palabra exacta, bÃºsquedas/mes, intenciÃ³n, categorÃ­a, dificultad, justificaciÃ³n, URL destino.\n3. THINK CULTURALLY: Â¿CÃ³mo busca la gente? Â¿QuÃ© problemas? Â¿Tendencias? Â¿Estacionalidad?\n4. VARIEDADES: Marca+genÃ©rica, preguntas, long-tail, comparativas, how-to, problemas.\n\nPARTE 1: TABLA COMPLETA\n| Ranking | Palabra Clave | BÃºsquedas/Mes | IntenciÃ³n | CategorÃ­a | Dificultad | URL Destino | JustificaciÃ³n |\nGenera 100+ rows.\n\nPARTE 2: INPUTS POR URL\nPara CADA URL genera bloque con:\n- URL, Tipo, KW Primaria, Volumen Total\n- Lista de KWs a atacar\n- DescripciÃ³n contenido ideal\n- H2s sugeridos\n- JSON de inputs para Fase 4:\n{\n  \"nombre_pagina\": \"[Nombre]\",\n  \"url_amigable\": \"[url]\",\n  \"tipo\": \"[CALCULADORA/BLOG/HERRAMIENTA]\",\n  \"palabra_clave_principal\": \"[KW]\",\n  \"palabras_clave_lsi\": [\"kw1\",\"kw2\",\"kw3\"],\n  \"descripcion\": \"[1-2 lÃ­neas]\",\n  \"intencion\": \"[TRANSACCIONAL/INFORMATIVA]\",\n  \"volumen_total\": [nÃºmero],\n  \"publico_objetivo\": \"[DescripciÃ³n]\",\n  \"cta_principal\": \"[BotÃ³n]\",\n  \"si_es_calculadora\": {\n    \"inputs_necesarios\": [\"Input 1\",\"Input 2\"],\n    \"outputs_esperados\": [\"Output 1\",\"Output 2\"],\n    \"formula_descripcion\": \"[FÃ³rmula]\"\n  },\n  \"si_es_blog\": {\n    \"longitud_palabras\": 1500,\n    \"h2_principales\": [\"H2 1\",\"H2 2\",\"H2 3\"],\n    \"incluir_ejemplos\": true,\n    \"incluir_datos\": true\n  }\n}\nREPITE para CADA URL.\n\nPARTE 3: RESUMEN EJECUTIVO\nTotal URLs, Total KWs, Volumen combinado, Dificultad promedio, Prioridad.";

P.P4A="=== GENERADOR DE CALCULADORA - HTML + JAVASCRIPT COMPLETO ===\n\nDATOS (del bloque JSON Fase 3):\nNombre: [nombre_pagina]\nURL: /[url_amigable]/\nKW principal: [palabra_clave_principal]\nKW LSI: [palabras_clave_lsi]\nDescripciÃ³n: [descripcion]\nPÃºblico: [pÃºblico_objetivo]\nCTA: [cta_principal]\nINPUTS: [si_es_calculadora.inputs_necesarios]\nOUTPUTS: [si_es_calculadora.outputs_esperados]\nFÃ“RMULA: [si_es_calculadora.formula_descripcion]\n\nESPECIFICACIONES:\n1. DISEÃ‘O: Gradiente azul (#667eea) a pÃºrpura (#764ba2), Responsive 375px+\n2. FUNCIONALIDAD: Vanilla JS, ValidaciÃ³n, 2 decimales EUR\n3. SEO: title+KW, meta description, h1, Schema WebApplication+Calculator\n4. CONVERSIÃ“N: BotÃ³n CTA prominente, Resultado con animaciÃ³n, Disclaimer\n\nREQUISITOS:\nâœ… Funciona al copiar tal cual\nâœ… ValidaciÃ³n inputs\nâœ… Resultados correctos\nâœ… Mobile first\nâœ… Sin console.log()\nâœ… Gradiente profesional\n\nGENERA: UN ÃšNICO BLOQUE HTML completo (copy-paste ready) con CSS inline, JS funcional, meta tags, Schema.";

P.P4B="=== GENERADOR DE ARTÃCULO BLOG - HTML COMPLETO ===\n\nDATOS (del bloque JSON Fase 3):\nTÃ­tulo: [nombre_pagina]\nURL: /[url_amigable]/\nKW principal: [palabra_clave_principal]\nKW LSI: [palabras_clave_lsi]\nDescripciÃ³n: [descripcion]\nIntenciÃ³n: [intenciÃ³n]\nPÃºblico: [pÃºblico_objetivo]\nLongitud: [si_es_blog.longitud_palabras] palabras\nH2s: [si_es_blog.h2_principales]\n\nESTRUCTURA:\n[INTRO 80-120 palabras] - Engancha, promete soluciÃ³n, incluye KW\n[H2: SUBTEMA 1 - 250-350] - KW LSI #1, dato/estadÃ­stica\n[H2: SUBTEMA 2 - 250-350] - KW LSI #2, casos reales\n[H2: SUBTEMA 3 - 250-350] - KW LSI #3, objeciones\n[H2: CÃ“MO USAR CALCULADORA - 150-200] - Paso a paso, LINK\n[CONCLUSIÃ“N - 100-150] - Resume, CTA final\n\nSEO: Title 60 chars, Meta 155 chars, 1xH1, 4-5xH2, KW 0.5-1%, 2 internal links.\nTONO: Conversacional, sin jerga, pÃ¡rrafos cortos.\n\nGENERA: HTML COMPLETO como UN ÃšNICO BLOQUE con article, Schema BlogPosting.";

P.P4C="=== GENERADOR DE HERRAMIENTA/COMPARADOR - HTML COMPLETO ===\n\nDATOS (del bloque JSON Fase 3):\nNombre: [nombre_pagina]\nURL: /[url_amigable]/\nKW: [palabra_clave_principal]\nDescripciÃ³n: [descripcion]\nPÃºblico: [pÃºblico_objetivo]\nCTA: [cta_principal]\n\nOBJETIVO: PÃ¡gina INTERACTIVA con HTML responsive, JS vanilla, SEO optimizado, conversiÃ³n alta.\n\nGENERA HTML COMPLETO Y FUNCIONAL como UN ÃšNICO BLOQUE .html.";

P.P5="=== GENERADOR DE PÃGINAS LEGALES ===\n\nPARÃMETROS:\nNombre sitio: [NOMBRE-SITIO]\nDominio: [DOMINIO]\nEmail: [EMAIL-CONTACTO]\nPaÃ­s: [PAÃS]\nTipo: [POLÃTICA PRIVACIDAD / TÃ‰RMINOS DE SERVICIO / AVISO LEGAL]\n\nINSTRUCCIONES: Crea HTML COMPLETA y LEGAL para [TIPO-PAGINA].\n- Cumplir RGPD/LOPD\n- Cookies, datos personales, derechos usuario\n- Secciones especÃ­ficas [PAÃS]\n\nPOLÃTICA PRIVACIDAD: IntroducciÃ³n, Responsable, Base legal, Datos, Derechos, Cookies, Cambios, Contacto.\nTÃ‰RMINOS: AceptaciÃ³n, Uso, PI, LimitaciÃ³n, Renuncia, ModificaciÃ³n, JurisdicciÃ³n, Contacto.\nAVISO LEGAL: IdentificaciÃ³n, Responsabilidad, PI, LimitaciÃ³n, GarantÃ­as, Cookies, Cambios, Contacto.\n\nGENERA HTML COMPLETO. Disclaimer: no es asesoramiento legal.";

P.P6="=== GENERADOR DE PÃGINA INICIO - HTML COMPLETO ===\n\nDATOS:\nNombre: [NOMBRE-SITIO]\nTagline: [TAGLINE-CORTO]\nDescripciÃ³n: [DESCRIPCIÃ“N-LARGA]\nCalculadoras: [URLS-CALCULADORAS]\nBlog: [URLS-ARTICULOS-BLOG]\n\nESTRUCTURA:\n1. HERO SECTION\n2. GRID DE CALCULADORAS (cards)\n3. CARACTERÃSTICAS\n4. PREVIEW BLOG\n5. FOOTER (iframe)\n\nColores: #667eea â†’ #764ba2. Mobile first 375px.\nGENERA HTML COMPLETO, HERMOSO Y RESPONSIVE.";

P.P7="=== GENERADOR DE HEADER & FOOTER COMPARTIDO ===\n\nDATOS:\nMarca: [NOMBRE-MARCA]\nDominio: [DOMINIO]\nLinks menÃº: [URLS-MENU]\n\nHEADER: Sticky, gradiente #667eeaâ†’#764ba2, texto blanco, responsive.\nFOOTER: Fondo #1a1a1a, texto #999, columnas, copyright, hover.\n\nGENERA HTML COMPLETO CON HEADER Y FOOTER.";

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DOM HELPERS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function el(tag,attrs){
  var e=document.createElement(tag);
  if(!attrs)return e;
  if(attrs.cls)e.className=attrs.cls;
  if(attrs.id)e.id=attrs.id;
  if(attrs.html)e.innerHTML=attrs.html;
  if(attrs.text)e.textContent=attrs.text;
  if(attrs.css)Object.assign(e.style,attrs.css);
  if(attrs.onclick)e.addEventListener('click',attrs.onclick);
  return e;
}
function add(parent){for(var i=1;i<arguments.length;i++)if(arguments[i])parent.appendChild(arguments[i]);return parent}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• REUSABLE BUILDERS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function mkSectionTitle(txt){return el('h3',{cls:'section-title',html:txt})}
function mkStepList(steps){return el('ol',{cls:'step-list',html:steps.map(function(s){return '<li>'+s+'</li>'}).join('')})}
function mkParagraph(innerHTML){return el('p',{html:innerHTML,css:{color:'#94a3b8',fontSize:'14px',lineHeight:'1.8'}})}
function mkInfoBox(bgColor,borderColor,innerHTML){var d=el('div',{cls:'info-box',html:innerHTML});d.style.background=bgColor;d.style.border='1px solid '+borderColor;return d}

function mkPromptBlock(title,note,promptKey){
  var block=el('div',{cls:'prompt-block'});
  var arrow=el('span',{cls:'prompt-arrow',text:'â–¼'});
  var toggle=el('button',{cls:'prompt-toggle'});
  toggle.innerHTML='<span style="display:flex;align-items:center;gap:10px"><span style="color:#f59e0b;font-size:18px">ğŸ“„</span>'+title+'</span>';
  toggle.appendChild(arrow);
  var body=el('div',{cls:'prompt-body',css:{display:'none'}});
  if(note)add(body,el('p',{html:note,css:{color:'#f59e0b',fontSize:'13px',marginBottom:'14px',fontStyle:'italic',lineHeight:'1.5'}}));
  var copyBtn=el('button',{cls:'copy-btn',text:'ğŸ“‹ Copiar prompt',onclick:function(){
    navigator.clipboard.writeText(P[promptKey]).then(function(){
      copyBtn.textContent='âœ“ Copiado';copyBtn.classList.add('copied');
      setTimeout(function(){copyBtn.textContent='ğŸ“‹ Copiar prompt';copyBtn.classList.remove('copied')},2000);
    });
  }});
  add(body,el('div',{css:{display:'flex',justifyContent:'flex-end',marginBottom:'10px'}}).appendChild(copyBtn).parentNode);
  var pre=el('pre',{cls:'prompt-pre'});pre.textContent=P[promptKey];
  add(body,pre);
  toggle.addEventListener('click',function(){var v=body.style.display==='none';body.style.display=v?'block':'none';arrow.classList.toggle('open',v)});
  return add(block,toggle,body);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PHASE CONTENT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function phaseContent1(c){
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Generar <strong style="color:#f59e0b">100 ideas de nichos SEO</strong> rentables para sitios de calculadoras. Cada nicho validado con volumen, viabilidad y potencial monetario.'));
  add(c,mkSectionTitle('ğŸ“ Pasos a seguir'),mkStepList(['Copia el prompt de abajo','Personaliza SOLO [PAÃS-DESTINO] (ej: Alemania, EspaÃ±aâ€¦)','Pega el prompt en tu IA preferida','Recibe la tabla CSV con 100 nichos','Elige 1 nicho â€” el que MÃS te apasione']));
  add(c,mkSectionTitle('ğŸ“„ Prompt: Generador de 100 Ideas (v3.0)'),mkPromptBlock('PROMPT 1 â€” Generador de 100 Ideas de Nichos SEO','Formato de salida: CSV. Personaliza SOLO [PAÃS-DESTINO].','P1'));
  add(c,mkInfoBox('rgba(245,158,11,.08)','rgba(245,158,11,.25)','<p style="color:#fbbf24;font-size:14px;margin:0;font-weight:700">ğŸ“‹ Output esperado</p><p style="color:#94a3b8;font-size:13px;margin-top:8px;margin-bottom:0">CSV con 100 filas: Ranking | Nicho | Palabra Clave | Volumen | Viabilidad | JustificaciÃ³n | Potencial | CategorÃ­a</p>'));
}
function phaseContent2(c){
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Analizar los <strong style="color:#f59e0b">TOP 10 competidores</strong> de tu nicho, encontrar gaps y diseÃ±ar la arquitectura completa de URLs.'));
  add(c,mkSectionTitle('ğŸ“ Pasos a seguir'),mkStepList(['Toma el nicho elegido en Fase 1','Personaliza: [NICHO-ELEGIDO], [PALABRA-CLAVE-PRINCIPAL], [PAÃS-IDIOMA]','Copia y pega el prompt','ObtÃ©n anÃ¡lisis + arquitectura recomendada','Guarda la tabla â€” la necesitarÃ¡s en Fase 3']));
  add(c,mkSectionTitle('ğŸ“„ Prompt: AnÃ¡lisis Competencia (v2.0)'),mkPromptBlock('PROMPT 2 â€” AnÃ¡lisis Competencia & Arquitectura URLs','Personaliza: [NICHO-ELEGIDO], [PALABRA-CLAVE-PRINCIPAL], [PAÃS-IDIOMA]','P2'));
  add(c,mkInfoBox('rgba(245,158,11,.08)','rgba(245,158,11,.25)','<p style="color:#fbbf24;font-size:14px;margin:0;font-weight:700">ğŸ“‹ Output esperado</p><p style="color:#94a3b8;font-size:13px;margin-top:8px;margin-bottom:0">AnÃ¡lisis detallado + tabla final de arquitectura de URLs</p>'));
}
function phaseContent3(c){
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Identificar <strong style="color:#f59e0b">100+ keywords reales</strong>, organizarlas por URL y generar los <strong style="color:#f59e0b">bloques JSON</strong> para Fase 4.'));
  add(c,mkSectionTitle('ğŸ“ Pasos a seguir'),mkStepList(['Toma la arquitectura de Fase 2','Personaliza: [NICHO], [KW-PRINCIPAL], [IDIOMA], [PAÃS], [URLS-ARQUITECTURA]','Pega el prompt en tu IA','Recibe: tabla 100+ KW + bloques JSON + resumen','Guarda TODO â€” cada bloque JSON es input directo para Fase 4']));
  add(c,mkSectionTitle('ğŸ“„ Prompt: Keyword Research (v3.0)'),mkPromptBlock('PROMPT 3 â€” Keyword Research + Inputs Fase 4','Personaliza: [NICHO], [KW-PRINCIPAL], [IDIOMA], [PAÃS], [URLS-ARQUITECTURA]','P3'));
  add(c,mkInfoBox('rgba(34,197,94,.08)','rgba(34,197,94,.25)','<p style="color:#4ade80;font-size:14px;font-weight:700;margin:0">âœ… Checklist de salida</p><div style="color:#94a3b8;font-size:13px;margin-top:10px;line-height:2">â˜‘ 100+ keywords identificadas<br>â˜‘ Bloques JSON listos<br>â˜‘ Agrupados por URL<br>â˜‘ Info completa para cada pÃ¡gina</div>'));
  add(c,mkInfoBox('rgba(245,158,11,.08)','rgba(245,158,11,.25)','<p style="color:#fbbf24;font-size:13px;margin:0">âš ï¸ <strong>IMPORTANTE:</strong> Cada bloque JSON es una plantilla que copiarÃ¡s en el prompt de Fase 4. Guarda TODO.</p>'));
}
function phaseContent4(c){
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Crear <strong style="color:#f59e0b">cada pÃ¡gina de tu sitio</strong> una por una como <code style="color:#f59e0b">.html</code> independiente.'));
  add(c,mkSectionTitle('ğŸ“ Flujo (repite por cada URL)'),mkStepList(['Copia el bloque JSON de Fase 3','Elige: 4A (Calculadora), 4B (Blog), 4C (Herramienta)','Reemplaza campos [entre_corchetes]','Pega â†’ obtÃ©n HTML completo','Guarda como [url_amigable].html','Repite â€” sin lÃ­mite']));
  add(c,mkInfoBox('rgba(245,158,11,.08)','rgba(245,158,11,.25)','<p style="color:#fbbf24;font-size:14px;margin:0;font-weight:700">ğŸ’¡ No hay lÃ­mite. Puedes crear 5, 20 o 100 URLs.</p>'));
  add(c,mkSectionTitle('ğŸ“„ Elige el tipo de pÃ¡gina'));
  var tabs=el('div',{css:{display:'flex',gap:'8px',marginBottom:'24px',flexWrap:'wrap'}});
  var content=el('div');
  var tabData=[
    {k:'calc',l:'âš™ï¸ Calculadora (4A)',color:'#3b82f6',pk:'P4A',pt:'PROMPT 4A â€” Generador de Calculadora',pn:'Uno por cada calculadora. Repite.',info:'â± <strong>5-8 min</strong> â†’ <code style="color:#60a5fa">[url].html</code>',ic:'rgba(59,130,246,.08)',ib:'rgba(59,130,246,.25)'},
    {k:'blog',l:'ğŸ“ Blog (4B)',color:'#8b5cf6',pk:'P4B',pt:'PROMPT 4B â€” Generador de Blog',pn:'Uno por cada artÃ­culo. Repite.',info:'â± <strong>8-10 min</strong> â†’ <code style="color:#a78bfa">blog-[url].html</code>',ic:'rgba(139,92,246,.08)',ib:'rgba(139,92,246,.25)'},
    {k:'tool',l:'ğŸ”§ Herramienta (4C)',color:'#ec4899',pk:'P4C',pt:'PROMPT 4C â€” Generador de Herramienta',pn:'Para comparadores e interactivos.',info:'â± <strong>10-12 min</strong> â†’ <code style="color:#f472b6">[url].html</code>',ic:'rgba(236,72,153,.08)',ib:'rgba(236,72,153,.25)'}
  ];
  var btns=[];
  function setTab(idx){
    content.innerHTML='';
    btns.forEach(function(b,i){b.style.background=i===idx?tabData[i].color:'rgba(255,255,255,.05)';b.style.border=i===idx?'none':'1px solid rgba(255,255,255,.1)'});
    var td=tabData[idx];
    add(content,mkPromptBlock(td.pt,td.pn,td.pk),mkInfoBox(td.ic,td.ib,'<p style="color:'+td.color+';font-size:13px;margin:0">'+td.info+'</p>'));
  }
  tabData.forEach(function(td,i){
    var btn=el('button',{cls:'sub-tab mono',text:td.l,onclick:function(){setTab(i)}});
    btns.push(btn);tabs.appendChild(btn);
  });
  add(c,tabs,content);setTab(0);
}
function phaseContent5(c){
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Crear las <strong style="color:#f59e0b">3 pÃ¡ginas legales obligatorias</strong>: Privacidad, TÃ©rminos y Aviso Legal.'));
  add(c,mkSectionTitle('ğŸ“ Pasos a seguir'),mkStepList(['Ejecuta el prompt 3 veces cambiando [TIPO-PAGINA]','1Âª: POLÃTICA DE PRIVACIDAD â†’ polÃ­tica-privacidad.html','2Âª: TÃ‰RMINOS DE SERVICIO â†’ tÃ©rminos-servicio.html','3Âª: AVISO LEGAL â†’ aviso-legal.html']));
  add(c,mkSectionTitle('ğŸ“„ Prompt: PÃ¡ginas Legales (v2.0)'),mkPromptBlock('PROMPT 5 â€” Generador de PÃ¡ginas Legales','Repite 3 veces cambiando [TIPO-PAGINA]. Personaliza: [NOMBRE-SITIO], [DOMINIO], [EMAIL], [PAÃS]','P5'));
  add(c,mkInfoBox('rgba(239,68,68,.08)','rgba(239,68,68,.25)','<p style="color:#f87171;font-size:14px;font-weight:700;margin:0">âš ï¸ Disclaimer</p><p style="color:#94a3b8;font-size:13px;margin-top:8px;margin-bottom:0">No reemplazan asesoramiento legal. Consulta abogado especializado.</p>'));
}
function phaseContent6(c){
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Crear la <strong style="color:#f59e0b">pÃ¡gina de inicio</strong> y el <strong style="color:#f59e0b">header/footer compartido</strong>.'));
  add(c,mkSectionTitle('ğŸ“ Pasos a seguir'),mkStepList(['Prompt 6 â†’ index.html','Prompt 7 â†’ header-footer.html','El header-footer se carga vÃ­a &lt;iframe&gt;']));
  add(c,mkSectionTitle('ğŸ“„ Prompt 6: PÃ¡gina Inicio'),mkPromptBlock('PROMPT 6 â€” PÃ¡gina de Inicio HTML','Personaliza: [NOMBRE-SITIO], [TAGLINE], [DESCRIPCIÃ“N], [URLS-CALCS], [URLS-BLOG]','P6'));
  add(c,mkSectionTitle('ğŸ“„ Prompt 7: Header & Footer'),mkPromptBlock('PROMPT 7 â€” Header & Footer','Personaliza: [NOMBRE-MARCA], [DOMINIO], [URLS-MENU]','P7'));
  add(c,mkInfoBox('rgba(245,158,11,.08)','rgba(245,158,11,.25)','<p style="color:#94a3b8;font-size:13px;margin:0">ğŸ“Œ El <code style="color:#f59e0b">header-footer.html</code> se carga en TODAS las pÃ¡ginas vÃ­a <code style="color:#f59e0b">&lt;iframe&gt;</code></p>'));
}
function phaseContent7(c){
  var cats=[
    {t:"Funcionalidad",i:["Todas las calculadoras funcionan","Resultados matemÃ¡ticamente precisos","ValidaciÃ³n de inputs funciona","Se ve bien en mÃ³vil (375px)","Se ve bien en desktop (1200px+)","Header/Footer carga en TODAS las pÃ¡ginas","No hay 404 errors"]},
    {t:"SEO",i:["Cada pÃ¡gina tiene title Ãºnico con KW","Cada pÃ¡gina tiene meta description","Una sola h1 por pÃ¡gina","H2/H3 estructurados","URLs amigables","Schema JSON-LD en cada pÃ¡gina","ImÃ¡genes con alt text","Sitemap.xml creado","Internal links funcionan"]},
    {t:"Contenido",i:["Sin errores ortogrÃ¡ficos","Copy profesional","Links internos funcionan","CTAs claros","Info verificable","PÃ¡ginas legales incluidas"]},
    {t:"Rendimiento",i:["Carga en < 3 seg","Sin errores en consola","Sin dependencias externas","CSS minimal"]},
    {t:"Legal",i:["PolÃ­tica privacidad presente","TÃ©rminos servicio presentes","Aviso legal presente","Links a legales en footer"]}
  ];
  var total=0;cats.forEach(function(cat){total+=cat.i.length});
  function countDone(){var n=0;for(var k in qaChecks)if(qaChecks[k])n++;return n}
  
  add(c,mkSectionTitle('ğŸ¯ Objetivo'),mkParagraph('Revisar <strong style="color:#f59e0b">TODO</strong> con el checklist de QA y <strong style="color:#22c55e">publicar en Cloudflare Pages</strong>.'));
  add(c,mkSectionTitle('âœ… Checklist de QA'));

  var barOuter=el('div',{css:{height:'8px',background:'rgba(255,255,255,.05)',borderRadius:'4px',marginBottom:'6px'}});
  var barInner=el('div',{css:{height:'100%',borderRadius:'4px',transition:'width .4s'}});
  barOuter.appendChild(barInner);
  var barText=el('p',{cls:'mono',css:{color:'#64748b',fontSize:'12px',marginTop:'6px',marginBottom:'20px'}});
  function updateBar(){var d=countDone(),pct=Math.round((d/total)*100);barInner.style.width=pct+'%';barInner.style.background=pct===100?'#22c55e':'linear-gradient(90deg,#f59e0b,#ef4444)';barText.textContent=d+'/'+total+' â€” '+pct+'% completado';barText.style.color=pct===100?'#22c55e':'#64748b'}
  updateBar();
  add(c,barOuter,barText);

  cats.forEach(function(cat,ci){
    add(c,el('h4',{html:cat.t,css:{color:'#cbd5e1',fontSize:'14px',marginBottom:'6px',marginTop:'16px'}}));
    cat.i.forEach(function(item,ii){
      var key=ci+'-'+ii;
      var checked=!!qaChecks[key];
      var label=el('div',{cls:'check-item',css:{color:checked?'#22c55e':'#94a3b8',cursor:'pointer'}});
      var box=el('span',{cls:'check-box',text:checked?'âœ“':'',css:{border:checked?'2px solid #22c55e':'2px solid rgba(255,255,255,.18)',background:checked?'rgba(34,197,94,.12)':'transparent',color:'#22c55e'}});
      var txt=el('span',{text:item,css:{textDecoration:checked?'line-through':'none',opacity:checked?'.55':'1'}});
      label.addEventListener('click',function(){
        qaChecks[key]=!qaChecks[key];save();
        var ch=qaChecks[key];
        box.textContent=ch?'âœ“':'';box.style.border=ch?'2px solid #22c55e':'2px solid rgba(255,255,255,.18)';box.style.background=ch?'rgba(34,197,94,.12)':'transparent';
        txt.style.textDecoration=ch?'line-through':'none';txt.style.opacity=ch?'.55':'1';
        label.style.color=ch?'#22c55e':'#94a3b8';
        updateBar();
      });
      add(label,box,txt);c.appendChild(label);
    });
  });

  add(c,mkSectionTitle('ğŸ“‹ Estructura Final'));
  var pre=el('pre',{cls:'code',css:{background:'rgba(0,0,0,.4)',border:'1px solid rgba(255,255,255,.05)',borderRadius:'10px',padding:'18px',color:'#94a3b8',fontSize:'13px',lineHeight:'1.8',overflowX:'auto'}});
  pre.textContent="/tu-sitio-seo/\nâ”œâ”€â”€ index.html\nâ”œâ”€â”€ header-footer.html\nâ”œâ”€â”€ calculadoras/\nâ”‚   â”œâ”€â”€ hypothekenrechner.html\nâ”‚   â””â”€â”€ ...\nâ”œâ”€â”€ blog/\nâ”‚   â””â”€â”€ ...\nâ”œâ”€â”€ herramientas/\nâ”‚   â””â”€â”€ comparador.html\nâ”œâ”€â”€ legal/\nâ”‚   â”œâ”€â”€ politica-privacidad.html\nâ”‚   â”œâ”€â”€ terminos-servicio.html\nâ”‚   â””â”€â”€ aviso-legal.html\nâ”œâ”€â”€ sitemap.xml\nâ””â”€â”€ robots.txt";
  add(c,pre);
  add(c,mkSectionTitle('ğŸš€ Publicar en Cloudflare (5-10 min)'),mkStepList(['Abre cloudflare.com','Pages â†’ Crear Proyecto','Direct Upload â†’ Selecciona TODOS tus archivos','Deploy','Conecta tu dominio']));
}

var phaseRenderers=[phaseContent1,phaseContent2,phaseContent3,phaseContent4,phaseContent5,phaseContent6,phaseContent7];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SHOW PHASE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showPhase(id){
  var phase=PHASES.find(function(p){return p.id===id});
  var done=completed.indexOf(id)!==-1;
  var next=PHASES.find(function(p){return p.id===id+1});
  var app=document.getElementById('app');
  app.innerHTML='';

  // Nav
  var nav=el('div',{cls:'nav-bar'});
  var backBtn=el('button',{cls:'back-btn',text:'â† Volver al mapa',onclick:renderMap});
  var xpArea=el('div',{css:{display:'flex',alignItems:'center',gap:'12px'},html:'<span class="mono" style="color:#f59e0b;font-size:12px;font-weight:700">'+getXP()+' XP</span><div style="width:80px;height:6px;background:rgba(255,255,255,.06);border-radius:3px;overflow:hidden"><div style="height:100%;width:'+getPct()+'%;background:linear-gradient(90deg,#f59e0b,#ef4444);border-radius:3px"></div></div>'});
  add(nav,backBtn,xpArea);app.appendChild(nav);

  // Header
  var hdr=el('div',{css:{padding:'48px 20px 0',maxWidth:'780px',margin:'0 auto'}});
  hdr.innerHTML='<div style="display:flex;align-items:center;gap:14px;margin-bottom:8px"><span style="font-size:36px">'+phase.icon+'</span><div><div class="mono" style="color:#64748b;font-size:12px;font-weight:700;letter-spacing:2px">FASE '+phase.id+' DE '+PHASES.length+'</div><h1 style="font-size:clamp(22px,4vw,30px);font-weight:800;color:#f1f5f9;line-height:1.2;margin-top:4px">'+phase.title+'</h1></div></div><p style="color:#64748b;font-size:15px;margin-bottom:12px">'+phase.subtitle+'</p><div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:32px"><span class="mono" style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:8px;padding:5px 14px;font-size:12px;color:#64748b">â± '+phase.time+'</span><span class="mono" style="background:'+(done?'rgba(34,197,94,.1)':'rgba(245,158,11,.1)')+';border:1px solid '+(done?'rgba(34,197,94,.2)':'rgba(245,158,11,.2)')+';border-radius:8px;padding:5px 14px;font-size:12px;color:'+(done?'#4ade80':'#f59e0b')+';font-weight:700">'+(done?'âœ“ COMPLETADA':'+'+phase.xp+' XP')+'</span><span class="mono" style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:8px;padding:5px 14px;font-size:12px;color:#64748b">ğŸ¯ '+phase.output+'</span></div>';
  app.appendChild(hdr);

  // Body
  var body=el('div',{css:{maxWidth:'780px',margin:'0 auto',padding:'0 20px 60px',animation:'fadeIn .4s'}});
  phaseRenderers[phase.id-1](body);

  // Buttons
  var btns=el('div',{css:{marginTop:'40px'}});
  if(!done){
    var cb=el('button',{cls:'complete-btn mono',css:{background:'linear-gradient(135deg,#f59e0b,#d97706)',color:'#000'},text:'âœ… COMPLETAR FASE '+phase.id+' â€” RECLAMAR +'+phase.xp+' XP',onclick:function(){
      if(completed.indexOf(id)===-1){completed.push(id);save();showBadge(phase)}
      showPhase(id);
    }});
    btns.appendChild(cb);
  }
  if(done&&next){
    btns.appendChild(el('button',{cls:'complete-btn mono',css:{background:'linear-gradient(135deg,#22c55e,#16a34a)',color:'#fff'},text:'â†’ AVANZAR A FASE '+next.id+': '+next.title,onclick:function(){showPhase(next.id)}}));
  }
  if(done&&!next){
    btns.appendChild(el('button',{cls:'complete-btn mono',css:{background:'linear-gradient(135deg,#22c55e,#16a34a)',color:'#fff'},text:'ğŸ† VER RESUMEN FINAL',onclick:renderMap}));
  }
  body.appendChild(btns);
  app.appendChild(body);
  window.scrollTo({top:0,behavior:'smooth'});
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• RENDER MAP â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderMap(){
  var app=document.getElementById('app');
  app.innerHTML='';
  var allDone=completed.length===PHASES.length;
  var xp=getXP(),pct=getPct(),lv=getLevel();

  // Hero (static HTML, no event listeners needed)
  var hero=el('div',{cls:'hero'});
  hero.innerHTML='<div class="hero-grid"></div><div class="hero-inner"><div class="hero-tag mono">PROFESSIONAL v2</div><h1 class="hero-title">Nichos SEO de Calculadoras</h1><p style="font-size:clamp(15px,2.5vw,18px);color:#64748b;margin-bottom:36px;line-height:1.6">De <strong style="color:#f59e0b">IDEA</strong> a <strong style="color:#22c55e">SITIO PUBLICADO</strong> en 2.5-3 Horas</p><div style="max-width:420px;margin:0 auto"><div style="display:flex;justify-content:space-between;align-items:baseline;margin-bottom:8px"><span class="mono" style="color:#f59e0b;font-weight:700;font-size:14px;'+(completed.length>0?'animation:glow 2s infinite':'')+'">LVL: '+lv+'</span><span class="mono" style="color:#64748b;font-size:13px">'+xp+'/'+TXP+' XP</span></div><div style="height:10px;background:rgba(255,255,255,.04);border-radius:5px;border:1px solid rgba(255,255,255,.06);overflow:hidden"><div style="height:100%;width:'+pct+'%;border-radius:5px;transition:width .8s cubic-bezier(.22,1,.36,1);'+(pct===100?'background:linear-gradient(90deg,#22c55e,#16a34a)':'background:linear-gradient(90deg,#f59e0b,#ef4444,#ec4899);box-shadow:0 0 12px rgba(245,158,11,.3)')+'"></div></div><div class="mono" style="display:flex;justify-content:space-between;margin-top:6px;font-size:11px;color:#475569"><span>'+completed.length+'/'+PHASES.length+' fases</span><span>'+pct+'%</span></div></div>'+(completed.length>0?'<div style="margin-top:20px;display:flex;justify-content:center;gap:8px;flex-wrap:wrap">'+completed.map(function(id){var p=PHASES.find(function(x){return x.id===id});return '<div class="mono" style="background:rgba(245,158,11,.1);border:1px solid rgba(245,158,11,.2);border-radius:8px;padding:4px 12px;font-size:11px;color:#f59e0b;font-weight:700">'+p.bi+' '+p.badge+'</div>'}).join('')+'</div>':'')+'</div>';
  app.appendChild(hero);

  // Phase list â€” using DOM methods to preserve onclick
  var wrap=el('div',{css:{maxWidth:'680px',margin:'0 auto',padding:'40px 20px 80px'}});

  PHASES.forEach(function(phase,idx){
    var done=completed.indexOf(phase.id)!==-1;
    var unlocked=phase.id===1||completed.indexOf(phase.id-1)!==-1;
    var isNext=!done&&unlocked;
    if(!done&&!isNext)return;

    var row=el('div',{css:{position:'relative',paddingLeft:'52px',marginBottom:'16px'}});
    if(idx<PHASES.length-1&&done){
      row.appendChild(el('div',{css:{position:'absolute',left:'21px',top:'48px',bottom:'-16px',width:'2px',background:'rgba(34,197,94,.25)'}}));
    }
    var dot=el('div',{cls:'mono',css:{position:'absolute',left:'8px',top:'16px',width:'28px',height:'28px',borderRadius:'50%',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'13px',fontWeight:'800',background:done?'#22c55e':'#f59e0b',color:done?'#fff':'#000',animation:isNext?'pulse 2s infinite':'none'},text:done?'âœ“':String(phase.id)});
    row.appendChild(dot);

    var card=el('div',{cls:'phase-card',css:{background:isNext?'linear-gradient(135deg,rgba(245,158,11,.08),rgba(245,158,11,.02))':'rgba(34,197,94,.03)',border:isNext?'1px solid rgba(245,158,11,.25)':'1px solid rgba(34,197,94,.12)'}});
    card.innerHTML='<div style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px"><div style="display:flex;align-items:center;gap:12px"><span style="font-size:24px">'+phase.icon+'</span><div><div style="font-size:16px;font-weight:700;color:'+(done?'#4ade80':'#e2e8f0')+'">Fase '+phase.id+': '+phase.title+'</div><div style="font-size:12px;color:#64748b;margin-top:2px">'+phase.subtitle+'</div></div></div><div style="display:flex;align-items:center;gap:8px"><span class="mono" style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:6px;padding:4px 12px;font-size:11px;color:#64748b">â± '+phase.time+'</span><span class="mono" style="background:'+(done?'rgba(34,197,94,.1)':'rgba(245,158,11,.1)')+';border:1px solid '+(done?'rgba(34,197,94,.2)':'rgba(245,158,11,.2)')+';border-radius:6px;padding:4px 12px;font-size:11px;color:'+(done?'#4ade80':'#f59e0b')+';font-weight:700">'+(done?'âœ“ DONE':'+'+phase.xp+' XP')+'</span><span style="color:#475569;font-size:16px;margin-left:4px">â†’</span></div></div>';
    card.addEventListener('click',(function(pid){return function(){showPhase(pid)}})(phase.id));
    row.appendChild(card);
    wrap.appendChild(row);
  });

  // Summary or final â€” also using DOM methods
  if(allDone){
    var fin=el('div',{css:{marginTop:'48px',padding:'44px 32px',background:'linear-gradient(145deg,rgba(34,197,94,.06),rgba(245,158,11,.04))',border:'2px solid rgba(34,197,94,.2)',borderRadius:'24px',textAlign:'center',animation:'fadeIn .6s'}});
    fin.innerHTML='<div style="font-size:60px;margin-bottom:16px">ğŸ†</div><h2 class="mono" style="font-size:28px;font-weight:800;margin-bottom:8px;background:linear-gradient(135deg,#22c55e,#f59e0b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text">Â¡MISIÃ“N COMPLETA!</h2><p style="color:#94a3b8;font-size:15px;margin-bottom:32px">Las 7 fases completadas. Tu sitio estÃ¡ listo.</p><div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-bottom:32px">'+["InvestigaciÃ³n","100+ Keywords","URLs creadas","SEO perfecto","Legal completo","Publicado"].map(function(l){return '<div style="background:rgba(34,197,94,.06);border:1px solid rgba(34,197,94,.12);border-radius:10px;padding:12px;font-size:12px;color:#4ade80;font-weight:600">âœ… '+l+'</div>'}).join('')+'</div><h3 class="mono" style="color:#e2e8f0;font-size:16px;margin-bottom:14px">ğŸ“ˆ PrÃ³ximos Pasos</h3><div style="text-align:left;max-width:420px;margin:0 auto;color:#94a3b8;font-size:13px;line-height:2.4"><div><strong style="color:#f59e0b">Semana 1:</strong> Monitorea Google Analytics</div><div><strong style="color:#f59e0b">Semana 2-4:</strong> Crea 2-3 backlinks</div><div><strong style="color:#f59e0b">Mes 1-2:</strong> Primeros visitantes</div><div><strong style="color:#f59e0b">Mes 3:</strong> Primeros ingresos</div><div><strong style="color:#f59e0b">Mes 6+:</strong> Ingresos pasivos recurrentes</div></div><div style="margin-top:28px;padding:20px;background:rgba(245,158,11,.06);border:1px solid rgba(245,158,11,.15);border-radius:14px"><h4 class="mono" style="color:#f59e0b;font-size:14px;margin-bottom:12px">ğŸ“Š EstimaciÃ³n de Ingresos</h4><div style="color:#94a3b8;font-size:13px;line-height:2">Mes 1-2: <strong style="color:#e2e8f0">50-300 visitantes</strong><br>Mes 3: <strong style="color:#e2e8f0">500-2,000</strong><br>Mes 6: <strong style="color:#e2e8f0">2,000-10,000+/mes</strong><br>Ingresos: <strong style="color:#22c55e">EUR 300-5,000+/mes</strong></div></div><p style="color:#64748b;font-size:14px;margin-top:28px;font-style:italic">Tu viaje empieza ahora. ğŸš€</p>';
    var resetBtn=el('button',{css:{marginTop:'20px',background:'rgba(255,255,255,.06)',border:'1px solid rgba(255,255,255,.1)',color:'#64748b',padding:'10px 24px',borderRadius:'10px',cursor:'pointer',fontSize:'12px',fontFamily:'inherit'},text:'â†º Reiniciar progreso',onclick:function(){completed=[];qaChecks={};save();renderMap()}});
    fin.appendChild(resetBtn);
    wrap.appendChild(fin);
  } else {
    var summary=el('div',{css:{marginTop:'40px',background:'rgba(255,255,255,.02)',border:'1px solid rgba(255,255,255,.06)',borderRadius:'14px',padding:'24px'}});
    summary.innerHTML='<h3 class="mono" style="color:#94a3b8;font-size:14px;margin-bottom:16px">ğŸ“Š Timeline Estimado</h3><div style="display:grid;grid-template-columns:1fr auto;gap:8px 20px;font-size:13px"><span style="color:#64748b">MÃ­nimo (5 URLs)</span><span class="mono" style="color:#e2e8f0">2-2.5 horas</span><span style="color:#64748b">EstÃ¡ndar (10 URLs)</span><span class="mono" style="color:#e2e8f0">2.5-3.5 horas</span><span style="color:#64748b">Extenso (20+ URLs)</span><span class="mono" style="color:#e2e8f0">4+ horas</span></div>';
    wrap.appendChild(summary);
  }

  app.appendChild(wrap);
  window.scrollTo({top:0,behavior:'smooth'});
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• INIT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
renderMap();
</script>
</body>
</html>
